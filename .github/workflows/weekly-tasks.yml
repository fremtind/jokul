# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

name: Weekly tasks
on:
    schedule:
        - cron: 00 05 * * 1

jobs:
    create_issue:
        name: Create weekly issue to upgrade dependencies
        runs-on: ubuntu-latest
        permissions:
            issues: write
        steps:
            - name: Create weekly issue to upgrade dependencies
              uses: imjohnbo/issue-bot@v3.3.3
              with:
                  assignees: "wkillerud, henrikhermansen, joms, kennidenni, mikaila94, piofinn, saegrov, sercansercan, espkva"
                  rotate-assignees: true
                  labels: "游대 round robin, 游댕 dependencies"
                  pinned: true
                  close-previous: true
                  title: "Ukentlig oppdatering av avhengigheter"
                  body: |
                      ## Sjekkliste

                      - [ ] P친 toppniv친 i J칮kul, kj칮r `yarn upgrade-interactive` og velg alle patch- og minor-versjoner [^1]
                      - [ ] Lag issue(s) p친 Github for 친 gj칮re oppgraderinger som krever mer tid
                      - [ ] Kj칮r `yarn build` og `yarn ci:test`
                      - [ ] Lag en pull request som vanlig

                      Dersom en devDependency har en ny major-versjon m친 du gjerne sjekke changeloggen og se om vi kan oppgraderes uten st칮rre problemer (f. eks. ved fjerning av st칮tte for utdaterte Node-versjoner).

                      Eksempler p친 oppgraderinger som krever mer tid er typisk React majorversjoner, eller dersom en oppgradering tar med seg typedefinisjoner som skaper store problemer.

                      ---

                      [1]: Vi har [noen f친 pakker hvor vi gj칮r egne patcher](https://github.com/fremtind/jokul/tree/main/patches) i J칮kul. Disse m친 gjerne oppgraderes, men krever at vi [lager en tilsvarende patch](https://github.com/ds300/patch-package#usage) p친 den nye versjonen.
              env:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
