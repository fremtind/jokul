import{r as u}from"./index-CRL2yuNo.js";import{t as A}from"./tokens-CvksrKef.js";import{u as F}from"./useBrowserPreferences-pnXkstjW.js";import{u as x}from"./usePreviousValue-B4HAJZS8.js";const R="block",T="standard",$="productive";function q(t,e){const f=x(t),E=(e==null?void 0:e.easing)||T,b=(e==null?void 0:e.timing)||$,m=(e==null?void 0:e.display)||R,d=`${A.motion.timing[b]} height ${A.motion.easing[E]}`,{prefersReducedMotion:y}=F(),g=u.useRef(),i=u.useRef(),l=u.useRef(null);function h(r){var c;const a=l.current;a&&r.target===a&&(t?a.removeAttribute("style"):(a.removeAttribute("style"),a.style.display="none"),(c=e==null?void 0:e.onTransitionEnd)==null||c.call(e,t,l))}const n=u.useCallback(()=>{var a,c,s,v;const r=l.current;if(!(!r||f===void 0)){if(t){if(t&&f)return}else if(r.style.display="none",!f)return;if((a=e==null?void 0:e.onTransitionStart)==null||a.call(e,t,l),y){r.removeAttribute("style"),t&&((c=e==null?void 0:e.onFirstVisible)==null||c.call(e,t,l)),(s=e==null?void 0:e.onTransitionEnd)==null||s.call(e,t,l);return}if(r.style.transition=d,r.style.display=m,r.style.overflow="hidden",t)(v=e==null?void 0:e.onFirstVisible)==null||v.call(e,t,l),r.style.height="0",r.style.height=`${r.scrollHeight}px`;else{if(r.scrollHeight===0){r.removeAttribute("style");return}r.style.height=`${r.scrollHeight}px`,g.current=requestAnimationFrame(()=>{i.current=requestAnimationFrame(()=>{r.style.height="0px"})})}}},[t,e,f,d,y,m]);return u.useEffect(()=>{n()},[t,n]),u.useEffect(()=>{const r=l.current;return r&&r.addEventListener("transitionend",h),()=>{r&&r.removeEventListener("transitionend",h)}},[t]),u.useEffect(()=>{const r=g.current,a=i.current;return()=>{r&&cancelAnimationFrame(r),a&&cancelAnimationFrame(a)}},[]),[l,n]}export{q as u};
