import{j as e}from"./jsx-runtime-D9p_MChh.js";import{r as o,R as y}from"./index-CRL2yuNo.js";import{G as ee}from"./Button-BPhaSTk9.js";import{p as $,q as ne,r as te,t as se,u as re,f as oe,b as ae,a as ie,d as le,e as me,v as ue,w as de,i as pe,j as ce,m as fe,x as ge,F as ke,k as he,g as ye,o as ve,h as xe,s as Me}from"./getThemeAndDensity-Cey0PTrK.js";import{c as Oe}from"./clsx-B-dksMZM.js";import{r as A}from"./index-BpBQ4hf7.js";import{u as we}from"./useId-BJAJhdYZ.js";import{u as Ee}from"./useBrowserPreferences-pnXkstjW.js";import{M as v}from"./MenuItem-QeAjl3KD.js";/* empty css               */import{E as je}from"./ErrorIcon-1chdNO9D.js";import{C as Ie}from"./ChevronDownIcon-CY7c70Lg.js";import"./_commonjsHelpers-gnU0ypJ3.js";import"./usePreviousValue-B4HAJZS8.js";import"./Loader-BBBxl9FC.js";import"./useDelayedRender-ClAGw7sE.js";import"./index-DO_xWACW.js";import"./index-BI6CK2Jw.js";import"./ChevronRightIcon-yS8Hxovu.js";import"./Icon-BsB2AusX.js";import"./OpenInNewIcon-CvBhAQWK.js";const be=(n,t,m)=>{const[M,O]=o.useState(!1),[p,c]=o.useState(!1);return o.useEffect(()=>{if(!n)return;function r(){c(!1)}function l(a){t&&a.nodeId!==t&&a.parentId===m&&c(!1)}return n.events.on("click",r),n.events.on("menuopen",l),()=>{n.events.off("click",r),n.events.off("menuopen",l)}},[n,t,m]),o.useEffect(()=>{p&&n&&t&&n.events.emit("menuopen",{parentId:m,nodeId:t})},[n,p,t,m]),o.useEffect(()=>{function r({pointerType:a}){a!=="touch"&&O(!0)}function l(){O(!1)}return window.addEventListener("pointermove",r,{once:!0,capture:!0}),window.addEventListener("keydown",l,!0),()=>{window.removeEventListener("pointermove",r,{capture:!0}),window.removeEventListener("keydown",l,!0)}},[M]),{allowHover:M,isOpen:p,setIsOpen:c}};function b(n,t=0){switch(n){case"top":return`0 ${t}px`;case"left":return`${t}px 0`;case"bottom":return`0 ${-t}px`;case"right":return`${-t}px 0`;default:return`0 ${t}px`}}const F=o.forwardRef((n,t)=>{const{children:m,className:M,initialPlacement:O,openOnHover:p=!1,keepOpenOnClickOutside:c=!1,triggerElement:r,isOpen:l,onToggle:a,...K}=n,R=we("jkl-menu"),{prefersReducedMotion:C}=Ee(),u=te(),E=se(),N=$(),f=N!=null,P=o.useRef([]),[T,D]=o.useState(null),{allowHover:q,isOpen:G,setIsOpen:S}=be(u,E,N),g=l!==void 0?l:G;o.useEffect(()=>a==null?void 0:a(g),[g,a]);const{refs:j,placement:_,context:d,floatingStyles:J}=re({nodeId:E,open:g,onOpenChange:S,placement:O||(f?"right-start":"bottom-start"),middleware:[ve(2),xe({fallbackAxisSideDirection:"end",crossAxis:!1}),Me({padding:8})],whileElementsMounted:ye}),{getReferenceProps:V,getFloatingProps:U,getItemProps:W}=oe([ae(d,{enabled:p&&q,delay:{open:75},handleClose:de({requireIntent:!0,blockPointerEvents:!0})}),ie(d,{event:"mousedown"}),le(d,{outsidePress:!c}),me(d,{role:"menu"}),ue(d,{listRef:P,activeIndex:T,nested:f,onNavigate:D})]),z=pe([j.setReference,t]),{theme:Q,density:X}=ce(j.reference.current),{isMounted:Y,styles:Z}=fe(d,{duration:{open:C?0:250,close:C?0:150},initial:({side:s})=>({opacity:0,translate:b(s,5)}),open:({side:s})=>({opacity:1,translate:b(s,0)}),close:({side:s})=>({opacity:0,translate:b(s,5)})});return e.jsxs(ge,{id:E,children:[y.isValidElement(r)&&(r.type==="button"||A.isForwardRef(r))?y.cloneElement(r,{...V({...K,ref:z,role:f?"menuitem":void 0,"aria-controls":R,onClick(s){s.stopPropagation()}})}):r,Y&&e.jsx(ke,{children:e.jsx(he,{context:d,modal:!1,initialFocus:f?-1:0,returnFocus:!f,children:e.jsx("div",{className:Oe("jkl jkl-menu",M),"data-theme":Q,"data-layout-density":X,role:"menu","data-placement":_,"aria-live":"assertive","aria-hidden":!g,ref:j.setFloating,...U({id:R,style:{...J,...Z}}),children:y.Children.map(m,(s,I)=>y.isValidElement(s)&&A.isForwardRef(s)?y.cloneElement(s,W({...s.props,tabIndex:T===I?0:-1,role:"menuitem",ref(i){P.current[I]=i},onClick(i){var k,h;(h=(k=s.props).onClick)==null||h.call(k,i),!i.defaultPrevented&&(u==null||u.events.emit("click"))},onKeyDown(i){var k,h;(h=(k=s.props).onKeyDown)==null||h.call(k,i),!i.defaultPrevented&&(u==null||u.events.emit("keydown"),i.currentTarget.role==="menuitemcheckbox"&&i.key==="Enter"&&S(!1))},onMouseEnter(){q&&g&&D(I)}})):s)})})})]})});F.displayName="MenuComponent";const x=o.forwardRef((n,t)=>$()===null?e.jsx(ne,{children:e.jsx(F,{ref:t,...n})}):e.jsx(F,{ref:t,...n}));x.displayName="Menu";x.__docgenInfo={description:"",methods:[],displayName:"Menu",props:{"data-testautoid":{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},initialPlacement:{required:!1,tsType:{name:"Placement"},description:`Initiell plassering av menyen. Dersom det ikke er plass på skjermen der du
angir at den skal åpnes vil den slyttes automatisk.
@default "bottom-start" på toppnivå, "right-start" for undermenyer`},openOnHover:{required:!1,tsType:{name:"boolean"},description:`Angir om menyen skal åpnes ved hover (uten å måtte klikke)
@default false`},keepOpenOnClickOutside:{required:!1,tsType:{name:"boolean"},description:`Angir om menyen skal holdes åpen når man klikker utenfor menyen
@default false`},triggerElement:{required:!0,tsType:{name:"ReactNode"},description:'Elementet som fungerer som trigger for menyen. Dersom elementet ikke er en `<button type="button">`\neller en `forwardRef<HTMLButtonElement>` vil det bli lagt inne i en knapp\nmed forhåndsdefinert stil. For å komme raskt i gang kan du bruke komponenten\n`MenuTriggerButton` fra denne pakken.'},isOpen:{required:!1,tsType:{name:"boolean"},description:`Kan brukes til å styre utenfra om menyen skal være åpen eller ikke.
@default false`},onToggle:{required:!1,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:"Callback som kalles når menyen åpnes eller lukkes."}},composes:["Omit"]};const ze={title:"Komponenter/Menu/Menu",component:x,parameters:{layout:"centered"},tags:["autodocs"]},w={args:{triggerElement:e.jsx(ee,{icon:e.jsx(Ie,{bold:!0}),iconPosition:"right","data-testid":"open-menu",children:"Ola Nordmann"}),keepOpenOnClickOutside:!1,children:e.jsxs(e.Fragment,{children:[e.jsx(v,{children:"Forsikringsprofil"}),e.jsxs(x,{triggerElement:e.jsx(v,{expandable:!0,children:"Dokumenter"}),children:[" ",e.jsx(v,{as:"a",href:"https://jokul.fremtind.no/",children:"Jøkuls hjemmeside"}),e.jsx(v,{as:"a",href:"https://fremtind.no/",children:"Fremtind Forsikring"})]}),e.jsx(v,{icon:e.jsx(je,{}),children:"Skadesaker"})]}),isOpen:!1},render:({...n})=>e.jsx(x,{...n})};var H,B,L;w.parameters={...w.parameters,docs:{...(H=w.parameters)==null?void 0:H.docs,source:{originalSource:`{
  args: {
    triggerElement: <GhostButton icon={<ChevronDownIcon bold />} iconPosition="right" data-testid="open-menu">
                Ola Nordmann
            </GhostButton>,
    keepOpenOnClickOutside: false,
    children: <>
                <MenuItem>Forsikringsprofil</MenuItem>
                <MenuComponent triggerElement={<MenuItem expandable={true}>Dokumenter</MenuItem>}>
                    {" "}
                    <MenuItem as="a" href="https://jokul.fremtind.no/">
                        Jøkuls hjemmeside
                    </MenuItem>
                    <MenuItem as="a" href="https://fremtind.no/">
                        Fremtind Forsikring
                    </MenuItem>
                </MenuComponent>

                <MenuItem icon={<ErrorIcon />}>Skadesaker</MenuItem>
            </>,
    isOpen: false
  },
  render: ({
    ...args
  }) => <MenuComponent {...args} />
}`,...(L=(B=w.parameters)==null?void 0:B.docs)==null?void 0:L.source}}};const Qe=["Menu"];export{w as Menu,Qe as __namedExportsOrder,ze as default};
