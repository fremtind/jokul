import{r as s}from"./index-siqcju79.js";import{t as y}from"./tokens-d2GYn7oW.js";import{u as v}from"./useBrowserPreferences-B9LcbCiO.js";import{u as A}from"./usePreviousValue-f0kyfTHz.js";const E="block",b="standard",F="productive";function H(t,r){const o=A(t),g=r?.easing||b,h=r?.timing||F,l=r?.display||E,u=`${y.motion.timing[h]} height ${y.motion.easing[g]}`,{prefersReducedMotion:c}=v(),f=s.useRef(),m=s.useRef(),n=s.useRef(null);function d(e){const i=n.current;i&&e.target===i&&(t?i.removeAttribute("style"):(i.removeAttribute("style"),i.style.display="none"),r?.onTransitionEnd?.(t,n))}const a=s.useCallback(()=>{const e=n.current;if(!(!e||o===void 0)){if(t){if(t&&o)return}else if(e.style.display="none",!o)return;if(r?.onTransitionStart?.(t,n),c){e.removeAttribute("style"),t?r?.onFirstVisible?.(t,n):e.style.display="none",r?.onTransitionEnd?.(t,n);return}if(e.style.transition=u,e.style.display=l,e.style.overflow="hidden",t)r?.onFirstVisible?.(t,n),e.style.height="0",e.style.height=`${e.scrollHeight}px`;else{if(e.scrollHeight===0){e.removeAttribute("style");return}e.style.height=`${e.scrollHeight}px`,f.current=requestAnimationFrame(()=>{m.current=requestAnimationFrame(()=>{e.style.height="0px"})})}}},[t,r,o,u,c,l]);return s.useEffect(()=>{a()},[t,a]),s.useEffect(()=>{const e=n.current;return e&&e.addEventListener("transitionend",d),()=>{e&&e.removeEventListener("transitionend",d)}},[t]),s.useEffect(()=>{const e=f.current,i=m.current;return()=>{e&&cancelAnimationFrame(e),i&&cancelAnimationFrame(i)}},[]),[n,a]}export{H as u};
