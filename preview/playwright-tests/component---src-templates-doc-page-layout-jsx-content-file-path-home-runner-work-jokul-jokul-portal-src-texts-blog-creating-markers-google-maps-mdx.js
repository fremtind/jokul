"use strict";(self.webpackChunk_fremtind_portal=self.webpackChunk_fremtind_portal||[]).push([[7161],{32674:function(e,t,n){n.r(t),n.d(t,{DocPageLayout:function(){return u},Head:function(){return m},default:function(){return p}});var a=n(47160),r=n(70079);function o(e){const t=Object.assign({p:"p",h3:"h3",pre:"pre",code:"code",a:"a",img:"img"},(0,a.ah)(),e.components),{Ingress:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Ingress",!0),r.createElement(r.Fragment,null,r.createElement(n,null,r.createElement(t.p,null,"This is the second post and video in a tutorial series on Google Maps, React, and TypeScript. After setting up Google Maps project in\nReact and rendering the map, the next task is to add markers on the map with click event.")),"\n",r.createElement(t.p,null,"You can watch the tutorial video below and this article serves as a summary of the implementation on YouTube."),"\n",r.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/Id2NtV3TcMQ",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),"\n",r.createElement(t.h3,null,"IMarker Interface and marker hook"),"\n",r.createElement(t.p,null,"First, we should create an interface for our marker, right? I want to keep three basic data attributes for a marker.\nOf course, the label of a marker could be also added here as another string value, but I want to keep things simple."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-typescript"},"interface IMarker {\n    address: string;\n    latitude: number;\n    longitude: number;\n}\n")),"\n",r.createElement(t.p,null,"Based on this interface, I also create the marker hook which will store the content."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-typescript"},"const [marker, setMarker] = useState<IMarker>();\n")),"\n",r.createElement(t.h3,null,"Event Listener"),"\n",r.createElement(t.p,null,"While working with Google Maps on React, you should still write some Vanilla JS code as well. I don’t like this, but we do not have another choice.\nAs soon as the ",r.createElement(t.code,null,"map")," hook is initialised, we add a click listener into this function.\nThis event listener will return us a ",r.createElement(t.code,null,"LatLng")," object which will be used to get the coordinates from ",r.createElement(t.code,null,"geocoder.")),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-typescript"},"const initEventListener = ():void => {\n    if (map) {\n        google.maps.event.addListener(map, 'click', function(e) {\n            coordinateToAddress(e.latLng);\n        })\n    }\n};\nuseEffect(initEventListener, [map]);\n")),"\n",r.createElement(t.h3,null,"Translating coordinate to an address"),"\n",r.createElement(t.p,null,"As you notice, I invoke a function called ",r.createElement(t.code,null,"coordinateToAddress()")," whenever the user clicks somewhere on the map.\nThe click event of ",r.createElement(t.code,null,"google.maps")," namespace returns us a typical event (e), but this e event has a special attribute called latLng.\nThis is our location value. In this function, I pull three different data types from ",r.createElement(t.code,null,"geocoder"),". I get the address, latitute and longitude.\nJust what I need to set my marker state."),"\n",r.createElement(t.p,null,"At this point of the program, our Map component successfully retrieves the coordinates of clicked point and\nit stores the data in our hook (marker), but we do not illustrate any marker to the user, yet."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-typescript"},"const coordinateToAddress = async (coordinate: GoogleLatLng) => {\n    const geocoder = new google.maps.Geocoder();\n    await geocoder.geocode({ location: coordinate}, function (results, status) {\n        if (status === 'OK') {\n            setMarker({\n                address: results[0].formatted_address,\n                latitude: coordinate.lat(),\n                longitude: coordinate.lng()\n            })\n        }\n    });\n};\n")),"\n",r.createElement(t.h3,null,"Adding single marker"),"\n",r.createElement(t.p,null,"I created this function just for convenience. If we decide to create an array of IMarker objects\n(which means storing several markers on the map at the same time), we would create another function called addMultipleMarkers.\nBut let’s see what ",r.createElement(t.code,null,"addSingleMarker()")," does first. It simply follows the changes on ",r.createElement(t.code,null,"marker")," hook with a ",r.createElement(t.code,null,"useEffect")," and\nwhenever it is updated we invoke ",r.createElement(t.code,null,"addMarker()")," function."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-typescript"},"const addSingleMarker = () => {\n   if (marker) {\n       addMarker(new google.maps.LatLng(marker.latitude, marker.longitude));\n   }\n};\nuseEffect(addSingleMarker, [marker]);\n")),"\n",r.createElement(t.p,null,"So, here is a much more reusable function. This is actually the moment where our Map component will create the marker and it will show it to the user."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-typescript"},"const addMarker = (location: GoogleLatLng): void => {\n    const marker: GoogleMarker = new google.maps.Marker({\n        position: location,\n        map: map,\n        icon: getIconAttributes('#000000')\n    });\n}\n")),"\n",r.createElement(t.p,null,r.createElement(t.code,null,"google.maps.Marker")," receives a JSON object where the ",r.createElement(t.a,{href:"https://developers.google.com/maps/documentation/javascript/reference/marker#MarkerOptions"},"options are almost limitless"),".\nThere are so many attributes that you can use to customise your marker, but I only used some fundamental parts here (position, map and icon).\nI also created a dummy function called ",r.createElement(t.code,null,"getIconAttributes()")," which is only used for the output of icon.\nYou may refer to Google Maps manual for further customisation."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-typescript"},"const getIconAttributes = (iconColor: string) => {\n    return {\n        path: 'M11.0639 15.3003L26.3642 2.47559e-05L41.6646 15.3003L26.3638 51.3639L11.0639 15.3003 M22,17.5a4.5,4.5 0 1,0 9,0a4.5,4.5 0 1,0 -9,0Z',\n        fillColor: iconColor,\n        fillOpacity: 0.8,\n        strokeColor: 'pink',\n        strokeWeight: 2,\n        anchor: new google.maps.Point(30, 50)\n    };\n};\n")),"\n",r.createElement(t.h3,null,"Homework"),"\n",r.createElement(t.p,null,"The gif animation below shows how I create markers on the map, but there is a problem.\nAs I click a point on the map, the component successfully creates a marker.\nHowever, when I create once more, the previous marker is still there although the marker hook changed its value.\nSo, try to create a function which will remove the previous marker. Good luck!"),"\n",r.createElement(t.p,null,r.createElement(t.img,{src:"/assets/blog/google-maps-create-marker-example-typescript.gif",alt:"Create markers demo"})),"\n",r.createElement(t.p,null,"I hope you enjoyed the part two. Third video and tutorial will show you how to calculate distance between markers."),"\n",r.createElement(t.p,null,"(This article was previously published on ",r.createElement(t.a,{href:"https://storksnestblog.wordpress.com/2020/10/27/creating-markers-on-google-maps-with-react-typescript/"},"Stork's Nest"),")"))}var l=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?r.createElement(t,e,r.createElement(o,e)):o(e)};var c=n(72285),s=n(22756),i=n(95573),d=n(1634);const m=e=>{let{pageContext:t}=e;return r.createElement(s.p,{title:t.title})},u=e=>{let{location:t,data:n,pageContext:a,children:o}=e;const{frontmatter:l}=n.page,{types:s}=a;return r.createElement(d.M,{className:"/profil/bildebruk"===t.pathname?"jkl-portal__main--no-margin":void 0},r.createElement(i.M1,Object.assign({},l,{versions:a.versions})),r.createElement(i.w5,l),o,s&&r.createElement(c.l,{types:s}))};function p(e){return r.createElement(u,e,r.createElement(l,e))}},72285:function(e,t,n){n.d(t,{l:function(){return h}});var a=n(58820),r=n(63571),o=n(87505),l=n(70079),c=n(54656);const s=e=>l.createElement("code",{className:"jkl-portal-inline-code"},e),i=e=>{var t;return null===(t=e.declarations)||void 0===t?void 0:t.some((e=>e.fileName.includes("node_modules")))},d=e=>{var t;return null===(t=e.declarations)||void 0===t?void 0:t.some((t=>"children"===e.name||!t.fileName.includes("node_modules")))},m=(e,t)=>{const{scrollLeft:n,scrollWidth:a}=e,{clientWidth:r}=t,o=n>0,l=a-n>r;t.classList.toggle("left-shadow",o),t.classList.toggle("right-shadow",l)},u=e=>{const t=e.target,n=t.parentElement;m(t,n)},p=e=>{let{props:t}=e;const n=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const e=n.current;if(e&&window.MutationObserver){const t=new window.MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"hidden"===t.attributeName){const t=e.querySelector(".jkl-portal-api-docs-table__table");t&&m(t,e)}}))})),a=n.current.parentElement.parentElement;t.observe(a,{attributes:!0,attributeFilter:["hidden"]})}}),[]),l.createElement("div",{ref:n,className:"jkl-portal-api-docs-table"},l.createElement("div",{onScroll:u,className:"jkl-portal-api-docs-table__wrapper"},l.createElement(o.w,{className:"jkl-portal-api-docs-table__table",verticalAlign:"top",columns:["Prop","Beskrivelse","Standardverdi","Påkrevd","Type"],rows:(a=t,a.map((e=>{var t,n;return[e.name?s(e.name):"",e.description,null!==(t=e.defaultValue)&&void 0!==t&&t.value?s(e.defaultValue.value):"ingen",e.required?"Påkrevd":"Ikke påkrevd",null!==(n=e.type)&&void 0!==n&&n.name?s(e.type.name):""]})))})));var a},h=e=>{let{types:t}=e;return l.createElement("section",{className:"mb-104 jkl-portal-paragraph"},l.createElement("h2",{className:"heading-1 mt-104"},"React API"),l.createElement("p",{className:"body mt-16"},"Her finner du en oversikt over props på komponentene i pakken."),l.createElement(a.U,{className:"mt-40 jkl-portal-api-docs"},Object.entries(t).map((e=>{let[t,n]=e;const a=n.props?Object.values(n.props).filter(d):[],o=n.props?Object.values(n.props).filter(i):[],s=(e=>{var t,n,a,r,o,l;return e.description||null!==(t=e.tags)&&void 0!==t&&t.param||null!==(n=e.tags)&&void 0!==n&&n.returns?["/**",null===(a=e.description)||void 0===a?void 0:a.split("\n").map((e=>" * "+e)).join("\n")," *",null===(r=e.tags)||void 0===r||null===(o=r.param)||void 0===o?void 0:o.split("\n").map((e=>" * @param "+e)).join("\n"),null!==(l=e.tags)&&void 0!==l&&l.returns?" * @returns "+e.tags.returns:void 0," */"].filter((e=>Boolean(e))).join("\n"):""})(n);return l.createElement(r.Q,{title:t,key:t,className:"jkl-portal-api-docs__item"},s&&l.createElement(c.dn,{className:"jkl-portal-code-block"},s),a.length>0&&l.createElement(p,{props:a}),o.length>0&&l.createElement(l.Fragment,null,l.createElement("p",{className:"jkl-portal-api-docs__external-props-header"},"Arvede props"),l.createElement(p,{props:o})))}))))}},1634:function(e,t,n){n.d(t,{M:function(){return s}});var a=n(26372),r=n.n(a),o=n(49597),l=n(70079),c=n(34044);const s=e=>{let{className:t,children:n}=e;const{prefersReducedMotion:a}=(0,l.useContext)(c.R),s="undefined"!=typeof window&&"?mode=e2e"===window.location.search;return l.createElement(o.E.main,{initial:{y:a?0:10,opacity:0},animate:{y:0,opacity:1},exit:{y:a?0:-20,opacity:0},transition:{duration:a||s?0:.35},className:r()("jkl-portal__main",t),id:"innhold"},n)}},58820:function(e,t,n){n.d(t,{U:function(){return l}});var a=n(35250),r=n(26372),o=n.n(r);const l=e=>{let{className:t,density:n,id:r,...l}=e;return(0,a.jsx)("section",{role:"group","data-testid":"jkl-accordion",className:o()("jkl-accordion",t),"data-density":n,id:r,...l})}},63571:function(e,t,n){n.d(t,{Q:function(){return i}});var a=n(35250),r=n(68998),o=n(1386),l=n(26372),c=n.n(l),s=n(70079);const i=e=>{let{children:t,title:n,className:l,startExpanded:i=!1,onClick:d,id:m,...u}=e;const[p,h]=(0,s.useState)(i),[g]=(0,s.useState)((()=>i)),{detailsRef:k,summaryRef:f,contentRef:E,onSummaryClick:v}=(0,o.E)({onOpenChange:(e,t)=>{h(e),d&&d(t,e)},isExpanded:g});return(0,a.jsxs)("details",{"data-testid":"jkl-accordion-item",...u,className:c()("jkl-accordion-item",l),ref:k,id:m,children:[(0,a.jsxs)("summary",{"data-testid":"jkl-accordion-item__title",className:"jkl-accordion-item__title",onClick:v,ref:f,children:[n,(0,a.jsx)(r.K,{variant:"inherit",className:"jkl-accordion-item__arrow",pointingDown:!p,bold:p})]}),(0,a.jsx)("div",{"data-testid":"jkl-accordion-item__content-wrapper",className:"jkl-accordion-item__content-wrapper",ref:E,children:(0,a.jsx)("div",{className:"jkl-accordion-item__content",children:t})})]})}},87505:function(e,t,n){n.d(t,{w:function(){return m}});var a=n(70079),r=n(41699),o=n(65174),l=n(6914),c=n(82546),s=n(39126),i=n(66169),d=n(94509);const m=(0,a.forwardRef)(((e,t)=>{let{caption:n,columns:m,emptyTableText:u,rows:p,verticalAlign:h,...g}=e;return a.createElement(r.i,{fullWidth:!0,...g,ref:t},n&&a.createElement(l.R,{srOnly:!0},n),a.createElement(s.s,null,a.createElement(d.S,null,m.map(((e,t)=>a.createElement(i.x,{key:t,density:"compact",bold:!0},e))))),a.createElement(o.R,null,0===p.length&&u&&a.createElement(d.S,null,a.createElement(c.p,{colSpan:m.length},u)),p.map(((e,t)=>a.createElement(d.S,{key:t},e.map(((e,t)=>a.createElement(c.p,{key:t,"data-th":m[t],verticalAlign:h},e))))))))}));m.displayName="DataTable"}}]);