import{j as e}from"./jsx-runtime-DqZpzl9T.js";import{r,R as w}from"./index-siqcju79.js";import{G as z}from"./Button-DE0vxub7.js";import{p as q,q as Q,r as X,t as Y,u as Z,f as ee,b as ne,a as te,d as se,e as re,v as oe,w as ie,i as ae,j as le,m as me,x as ue,F as de,k as pe,g as ce,o as fe,h as ge,s as ke}from"./getThemeAndDensity-CIeob-5A.js";import{c as he}from"./clsx-B-dksMZM.js";import{u as ye}from"./useBrowserPreferences-B9LcbCiO.js";import{S}from"./SlotComponent-DjLpilNT.js";import{M as g}from"./MenuItem-FDaXnjZl.js";/* empty css               */import{E as ve}from"./ErrorIcon-4c1VmZaU.js";import{C as xe}from"./ChevronDownIcon-S48iRPy_.js";import"./_commonjsHelpers-DaWZu8wl.js";import"./usePreviousValue-f0kyfTHz.js";import"./Loader-CDpFE6wc.js";import"./useDelayedRender-CQprwS1c.js";import"./index-BdKvcPYQ.js";import"./index-yL1brwCS.js";import"./mergeRefs-CYSLoF3z.js";import"./ChevronRightIcon-DscfWr0z.js";import"./Icon-DnRkF4CO.js";import"./OpenInNewIcon-DjpoFjwC.js";const Me=(n,t,l)=>{const[h,y]=r.useState(!1),[d,p]=r.useState(!1);return r.useEffect(()=>{if(!n)return;function i(){p(!1)}function a(m){t&&m.nodeId!==t&&m.parentId===l&&p(!1)}return n.events.on("click",i),n.events.on("menuopen",a),()=>{n.events.off("click",i),n.events.off("menuopen",a)}},[n,t,l]),r.useEffect(()=>{d&&n&&t&&n.events.emit("menuopen",{parentId:l,nodeId:t})},[n,d,t,l]),r.useEffect(()=>{function i({pointerType:m}){m!=="touch"&&y(!0)}function a(){y(!1)}return window.addEventListener("pointermove",i,{once:!0,capture:!0}),window.addEventListener("keydown",a,!0),()=>{window.removeEventListener("pointermove",i,{capture:!0}),window.removeEventListener("keydown",a,!0)}},[h]),{allowHover:h,isOpen:d,setIsOpen:p}};function E(n,t=0){switch(n){case"top":return`0 ${t}px`;case"left":return`${t}px 0`;case"bottom":return`0 ${-t}px`;case"right":return`${-t}px 0`;default:return`0 ${t}px`}}const I=r.forwardRef((n,t)=>{const{children:l,className:h,initialPlacement:y,openOnHover:d=!1,keepOpenOnClickOutside:p=!1,triggerElement:i,isOpen:a,onToggle:m,...A}=n,b=`"jkl-menu"${r.useId()}`,{prefersReducedMotion:C}=ye(),x=X(),M=Y(),F=q(),c=F!=null,R=r.useRef([]),[N,T]=r.useState(null),{allowHover:P,isOpen:H,setIsOpen:D}=Me(x,M,F),f=a!==void 0?a:H;r.useEffect(()=>m?.(f),[f,m]);const{refs:O,placement:$,context:u,floatingStyles:B}=Z({nodeId:M,open:f,onOpenChange:D,placement:y||(c?"right-start":"bottom-start"),middleware:[fe(2),ge({fallbackAxisSideDirection:"end",crossAxis:!1}),ke({padding:8})],whileElementsMounted:ce}),{getReferenceProps:L,getFloatingProps:K,getItemProps:G}=ee([ne(u,{enabled:d&&P,delay:{open:75},handleClose:ie({requireIntent:!0,blockPointerEvents:!0})}),te(u,{event:"mousedown"}),se(u,{outsidePress:!p}),re(u,{role:"menu"}),oe(u,{listRef:R,activeIndex:N,nested:c,onNavigate:T})]),_=ae([O.setReference,t]),{theme:J,density:V}=le(O.reference.current),{isMounted:U,styles:W}=me(u,{duration:{open:C?0:250,close:C?0:150},initial:({side:s})=>({opacity:0,translate:E(s,5)}),open:({side:s})=>({opacity:1,translate:E(s,0)}),close:({side:s})=>({opacity:0,translate:E(s,5)})});return e.jsxs(ue,{id:M,children:[w.isValidElement(i)&&e.jsx(S,{...L({...A,ref:_,role:c?"menuitem":void 0,"aria-controls":b,onClick(s){s.stopPropagation()}}),children:i}),U&&e.jsx(de,{children:e.jsx(pe,{context:u,modal:!1,initialFocus:c?-1:0,returnFocus:!c,children:e.jsx("div",{className:he("jkl jkl-menu",h),"data-theme":J,"data-layout-density":V,role:"menu","data-placement":$,"aria-live":"assertive","aria-hidden":!f,ref:O.setFloating,...K({id:b,style:{...B,...W}}),children:w.Children.map(l,(s,j)=>w.isValidElement(s)?e.jsx(S,{...G({...s.props,tabIndex:N===j?0:-1,role:"menuitem",ref(o){R.current[j]=o},onClick(o){s.props.onClick?.(o),!o.defaultPrevented&&x?.events.emit("click")},onKeyDown(o){s.props.onKeyDown?.(o),!o.defaultPrevented&&(x?.events.emit("keydown"),o.currentTarget.role==="menuitemcheckbox"&&o.key==="Enter"&&D(!1))},onMouseEnter(){P&&f&&T(j)}}),children:s}):s)})})})]})});I.displayName="MenuComponent";const k=r.forwardRef((n,t)=>q()===null?e.jsx(Q,{children:e.jsx(I,{ref:t,...n})}):e.jsx(I,{ref:t,...n}));k.displayName="Menu";k.__docgenInfo={description:"",methods:[],displayName:"Menu",props:{"data-testautoid":{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},initialPlacement:{required:!1,tsType:{name:"Placement"},description:`Initiell plassering av menyen. Dersom det ikke er plass på skjermen der du
angir at den skal åpnes vil den slyttes automatisk.
@default "bottom-start" på toppnivå, "right-start" for undermenyer`},openOnHover:{required:!1,tsType:{name:"boolean"},description:`Angir om menyen skal åpnes ved hover (uten å måtte klikke)
@default false`},keepOpenOnClickOutside:{required:!1,tsType:{name:"boolean"},description:`Angir om menyen skal holdes åpen når man klikker utenfor menyen
@default false`},triggerElement:{required:!0,tsType:{name:"ReactNode"},description:'Elementet som fungerer som trigger for menyen. Dersom elementet ikke er en `<button type="button">`\neller en `forwardRef<HTMLButtonElement>` vil det bli lagt inne i en knapp\nmed forhåndsdefinert stil. For å komme raskt i gang kan du bruke komponenten\n`MenuTriggerButton` fra denne pakken.'},isOpen:{required:!1,tsType:{name:"boolean"},description:`Kan brukes til å styre utenfra om menyen skal være åpen eller ikke.
@default false`},onToggle:{required:!1,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:"Callback som kalles når menyen åpnes eller lukkes."}},composes:["Omit"]};const Ge={title:"Komponenter/Menu/Menu",component:k,parameters:{layout:"centered"},tags:["autodocs"]},v={args:{triggerElement:e.jsx(z,{icon:e.jsx(xe,{bold:!0}),iconPosition:"right","data-testid":"open-menu",children:"Ola Nordmann"}),keepOpenOnClickOutside:!1,children:e.jsxs(e.Fragment,{children:[e.jsx(g,{children:"Forsikringsprofil"}),e.jsxs(k,{triggerElement:e.jsx(g,{expandable:!0,children:"Dokumenter"}),children:[" ",e.jsx(g,{as:"a",href:"https://jokul.fremtind.no/",children:"Jøkuls hjemmeside"}),e.jsx(g,{as:"a",href:"https://fremtind.no/",children:"Fremtind Forsikring"})]}),e.jsx(g,{icon:e.jsx(ve,{}),children:"Skadesaker"})]}),isOpen:!1},render:({...n})=>e.jsx(k,{...n})};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  args: {
    triggerElement: <GhostButton icon={<ChevronDownIcon bold />} iconPosition="right" data-testid="open-menu">
                Ola Nordmann
            </GhostButton>,
    keepOpenOnClickOutside: false,
    children: <>
                <MenuItem>Forsikringsprofil</MenuItem>
                <MenuComponent triggerElement={<MenuItem expandable={true}>Dokumenter</MenuItem>}>
                    {" "}
                    <MenuItem as="a" href="https://jokul.fremtind.no/">
                        Jøkuls hjemmeside
                    </MenuItem>
                    <MenuItem as="a" href="https://fremtind.no/">
                        Fremtind Forsikring
                    </MenuItem>
                </MenuComponent>

                <MenuItem icon={<ErrorIcon />}>Skadesaker</MenuItem>
            </>,
    isOpen: false
  },
  render: ({
    ...args
  }) => <MenuComponent {...args} />
}`,...v.parameters?.docs?.source}}};const _e=["Menu"];export{v as Menu,_e as __namedExportsOrder,Ge as default};
