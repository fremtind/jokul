import{r as i}from"./index-siqcju79.js";import{t as y}from"./tokens-BiWAXAgN.js";import{u as h}from"./useBrowserPreferences-B9LcbCiO.js";import{u as p}from"./usePreviousValue-f0kyfTHz.js";const v="standard",A="productive";function P(t,n,o,l){const e=t.current;if(!e)return;e.removeAttribute("style");const a=e.scrollHeight;o.current=requestAnimationFrame(()=>{e.style.removeProperty("transition"),e.dataset.expanded="false";const u=e.getBoundingClientRect().height;e.dataset.expanded="true",e.style.setProperty("height",`${a}px`),e.style.setProperty("overflow-y","hidden"),l.current=requestAnimationFrame(()=>{e.style.setProperty("transition",n),e.style.setProperty("height",`${u}px`),e.dataset.expanded="false"})})}function H(t,n,o,l){const e=t.current;if(!e)return;e.removeAttribute("style");const a=e.scrollHeight;o.current=requestAnimationFrame(()=>{e.style.removeProperty("transition"),e.dataset.expanded="false";const u=e.getBoundingClientRect().height;e.style.setProperty("height",`${u}px`),e.style.setProperty("overflow-y","hidden"),l.current=requestAnimationFrame(()=>{e.style.setProperty("transition",n),e.style.setProperty("height",`${a}px`),e.dataset.expanded="true"})})}function w(t,n){const o=p(t),l=n?.easing||v,e=n?.timing||A,a=`${y.motion.timing[e]} height ${y.motion.easing[l]}`,{prefersReducedMotion:u}=h(),m=i.useRef(),f=i.useRef(),s=i.useRef(null),g=i.useCallback(r=>{const c=s.current;c&&r.target===c&&(c.removeAttribute("style"),n?.onTransitionEnd?.(t,s))},[n,t]),d=i.useCallback(()=>{const r=s.current;if(r&&(o===void 0&&(r.dataset.expanded=t?"true":"false"),!(!t&&!o||t&&o))){if(n?.onTransitionStart?.(t,s),u){r.removeAttribute("style"),r.dataset.expanded=t?"true":"false",n?.onTransitionEnd?.(t,s);return}t?H(s,a,m,f):P(s,a,m,f)}},[o,t,n,u,a]);return i.useEffect(()=>{d()},[t,d]),i.useEffect(()=>{const r=s.current;return r&&r.addEventListener("transitionend",g),()=>{r&&r.removeEventListener("transitionend",g)}},[t]),i.useEffect(()=>{const r=m.current,c=f.current;return()=>{r&&cancelAnimationFrame(r),c&&cancelAnimationFrame(c)}},[]),[s,d]}export{w as u};
