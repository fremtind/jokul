import{r as t}from"./index-siqcju79.js";import{t as v}from"./tokens-CvksrKef.js";import{u as A}from"./useBrowserPreferences-B9LcbCiO.js";import{u as E}from"./usePreviousValue-f0kyfTHz.js";const P="standard",H="expressive";function F(s,u){const o=E(s),[a,c]=t.useState(0),y=P,g=H,m=`${v.motion.timing[g]} height ${v.motion.easing[y]}`,{prefersReducedMotion:l}=A(),f=t.useRef(),d=t.useRef(),r=t.useRef(null),i=t.useCallback(e=>{const n=r.current;n&&e.target===n&&n.removeAttribute("style")},[u]),p=t.useCallback(()=>{const e=r.current;if(!e)return;e.removeAttribute("style");const n=e.scrollHeight;f.current=requestAnimationFrame(()=>{e.style.removeProperty("transition"),e.style.setProperty("height",`${a}px`),e.style.setProperty("overflow-y","hidden"),d.current=requestAnimationFrame(()=>{e.style.setProperty("transition",m),e.style.setProperty("height",`${n}px`)})}),c(n)},[m,a]),h=t.useCallback(()=>{const e=r.current;if(e){if(o===void 0){c(e.scrollHeight);return}s!==o&&(l||p())}},[p,s,o,u,l]);return t.useEffect(()=>{h()},[s,h]),t.useEffect(()=>{const e=r.current;return e&&e.addEventListener("transitionend",i),()=>{e&&e.removeEventListener("transitionend",i)}},[i]),t.useEffect(()=>{const e=f.current,n=d.current;return()=>{e&&cancelAnimationFrame(e),n&&cancelAnimationFrame(n)}},[]),r}export{F as u};
