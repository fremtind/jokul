import{c as _}from"./clsx-B-dksMZM.js";import{r as t,R as a}from"./index-siqcju79.js";import{t as b}from"./tokens-CvksrKef.js";import{u as g}from"./useBrowserPreferences-B9LcbCiO.js";import{u as k}from"./usePreviousValue-f0kyfTHz.js";const x="standard",P="expressive";function R(l,p){const s=k(l),[c,i]=t.useState(0),y=x,d=P,o=`${b.motion.timing[d]} height ${b.motion.easing[y]}`,{prefersReducedMotion:f}=g(),h=t.useRef(),u=t.useRef(),r=t.useRef(null),m=t.useCallback(e=>{const n=r.current;n&&e.target===n&&n.removeAttribute("style")},[p]),v=t.useCallback(()=>{const e=r.current;if(!e)return;e.removeAttribute("style");const n=e.scrollHeight;h.current=requestAnimationFrame(()=>{e.style.removeProperty("transition"),e.style.setProperty("height",`${c}px`),e.style.setProperty("overflow-y","hidden"),u.current=requestAnimationFrame(()=>{e.style.setProperty("transition",o),e.style.setProperty("height",`${n}px`)})}),i(n)},[o,c]),E=t.useCallback(()=>{const e=r.current;if(e){if(s===void 0){i(e.scrollHeight);return}l!==s&&(f||v())}},[v,l,s,p,f]);return t.useEffect(()=>{E()},[l,E]),t.useEffect(()=>{const e=r.current;return e&&e.addEventListener("transitionend",m),()=>{e&&e.removeEventListener("transitionend",m)}},[m]),t.useEffect(()=>{const e=h.current,n=u.current;return()=>{e&&cancelAnimationFrame(e),n&&cancelAnimationFrame(n)}},[]),r}const j=t.forwardRef(function({className:p,isChecked:s,children:c,alwaysOpen:i,label:y,extraLabel:d,type:o,...f},h){const u=`content-${t.useId()}`,r=`input-${t.useId()}`,m=t.Children.count(c)>0,v=R(s);return a.createElement("div",{className:_("jkl-input-panel",`jkl-${o}-panel`,p)},a.createElement("label",{className:"jkl-input-panel__label",htmlFor:r},a.createElement("input",{ref:h,id:r,className:"jkl-input-panel__input",type:o,"aria-controls":i?void 0:u,"aria-expanded":i?void 0:s,...f}),a.createElement("span",{"aria-hidden":"true",className:`jkl-${o}-panel__decorator`}),a.createElement("span",{className:"jkl-input-panel__main-label"},y),a.createElement("span",{className:_("jkl-input-panel__extra-label",{"jkl-input-panel__extra-label--text":typeof d=="string"})},d)),m&&a.createElement("div",{ref:v,"aria-hidden":!s&&!i},a.createElement("div",{className:"jkl-input-panel__content",id:u,"data-alwaysopen":i},c)))});j.__docgenInfo={description:"",methods:[],displayName:"BasePanel",props:{isChecked:{required:!0,tsType:{name:"boolean"},description:""},alwaysOpen:{required:!0,tsType:{name:"boolean"},description:""},label:{required:!0,tsType:{name:"string"},description:""},extraLabel:{required:!1,tsType:{name:"ReactNode"},description:""},type:{required:!0,tsType:{name:"union",raw:'"radio" | "checkbox"',elements:[{name:"literal",value:'"radio"'},{name:"literal",value:'"checkbox"'}]},description:""}}};export{j as B};
