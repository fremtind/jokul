import{b as W,r as w,R as s}from"./index-siqcju79.js";import{S as M,P as H}from"./Button-Bm5jRD6q.js";import{I as G}from"./index-BdKvcPYQ.js";import{M as U,a as J,b as V,c as Y,d as z,f as X,g as Q}from"./Modal-DkEi8KmZ.js";import{r as Z}from"./index-yL1brwCS.js";import{a as ee}from"./_commonjsHelpers-DaWZu8wl.js";import{r as te}from"./index-Chjiymov.js";import{u as ne}from"./useId-CahK3IZ3.js";import{C as ie}from"./Checkbox-CwfoYjrc.js";import"./clsx-B-dksMZM.js";import"./usePreviousValue-f0kyfTHz.js";import"./Loader-Dq-CBRAZ.js";import"./useDelayedRender-CQprwS1c.js";import"./IconButton-BsqD9nTf.js";import"./CloseIcon-bvBUMA_V.js";import"./Icon-mINJCSxV.js";var A={},oe=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'],ae="Tab",re="Escape";function p(e){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=e,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}p.prototype.create=function(){this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=$('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach((function(t){t.addEventListener("click",this._show)}).bind(this));const e=this.$el;return this._closers=$("[data-a11y-dialog-hide]",this.$el).filter(function(t){return t.closest('[aria-modal="true"], [data-a11y-dialog]')===e}).concat($('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach((function(t){t.addEventListener("click",this._hide)}).bind(this)),this._fire("create"),this};p.prototype.show=function(e){return this.shown?this:(this._previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,F(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",e),this)};p.prototype.hide=function(e){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",e),this):this};p.prototype.destroy=function(){return this.hide(),this._openers.forEach((function(e){e.removeEventListener("click",this._show)}).bind(this)),this._closers.forEach((function(e){e.removeEventListener("click",this._hide)}).bind(this)),this._fire("destroy"),this._listeners={},this};p.prototype.on=function(e,t){return typeof this._listeners[e]>"u"&&(this._listeners[e]=[]),this._listeners[e].push(t),this};p.prototype.off=function(e,t){var a=(this._listeners[e]||[]).indexOf(t);return a>-1&&this._listeners[e].splice(a,1),this};p.prototype._fire=function(e,t){var a=this._listeners[e]||[],i=new CustomEvent(e,{detail:t});this.$el.dispatchEvent(i),a.forEach((function(l){l(this.$el,t)}).bind(this))};p.prototype._bindKeypress=function(e){const t=document.activeElement;t&&t.closest('[aria-modal="true"]')!==this.$el||(this.shown&&e.key===re&&this.$el.getAttribute("role")!=="alertdialog"&&(e.preventDefault(),this.hide(e)),this.shown&&e.key===ae&&ue(this.$el,e))};p.prototype._maintainFocus=function(e){this.shown&&!e.target.closest('[aria-modal="true"]')&&!e.target.closest("[data-a11y-dialog-ignore-focus-trap]")&&F(this.$el)};function se(e){return Array.prototype.slice.call(e)}function $(e,t){return se((t||document).querySelectorAll(e))}function F(e){var t=e.querySelector("[autofocus]")||e;t.focus()}function le(e){return $(oe.join(","),e).filter(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)})}function ue(e,t){var a=le(e),i=a.indexOf(document.activeElement);t.shiftKey&&i===0?(a[a.length-1].focus(),t.preventDefault()):!t.shiftKey&&i===a.length-1&&(a[0].focus(),t.preventDefault())}function O(){$("[data-a11y-dialog]").forEach(function(e){new p(e)})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",O):window.requestAnimationFrame?window.requestAnimationFrame(O):window.setTimeout(O,16));const ce=Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"})),de=ee(ce);var B;function fe(){if(B)return A;B=1,Object.defineProperty(A,"__esModule",{value:!0}),A.useA11yDialog=A.A11yDialog=void 0;var e=l(W()),t=l(Z()),a=l(de),i=l(te());function l(o){return o&&o.__esModule?o:{default:o}}function u(){return u=Object.assign||function(o){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(o[c]=r[c])}return o},u.apply(this,arguments)}function y(o,n){return h(o)||C(o,n)||_(o,n)||m()}function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _(o,n){if(o){if(typeof o=="string")return k(o,n);var r=Object.prototype.toString.call(o).slice(8,-1);if(r==="Object"&&o.constructor&&(r=o.constructor.name),r==="Map"||r==="Set")return Array.from(o);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(o,n)}}function k(o,n){(n==null||n>o.length)&&(n=o.length);for(var r=0,c=new Array(n);r<n;r++)c[r]=o[r];return c}function C(o,n){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(o)))){var r=[],c=!0,d=!1,v=void 0;try{for(var f=o[Symbol.iterator](),b;!(c=(b=f.next()).done)&&(r.push(b.value),!(n&&r.length===n));c=!0);}catch(x){d=!0,v=x}finally{try{!c&&f.return!=null&&f.return()}finally{if(d)throw v}}return r}}function h(o){if(Array.isArray(o))return o}var E=function(){var n=e.default.useState(!1),r=y(n,2),c=r[0],d=r[1];return e.default.useEffect(function(){return d(!0)},[]),c},D=function(){var n=e.default.useState(null),r=y(n,2),c=r[0],d=r[1],v=e.default.useCallback(function(f){f!==null&&d(new a.default(f))},[]);return[c,v]},S=function(n){var r=D(),c=y(r,2),d=c[0],v=c[1],f=e.default.useCallback(function(){return d.hide()},[d]),b=n.role||"dialog",x=b==="alertdialog",j=n.titleId||n.id+"-title";return e.default.useEffect(function(){return function(){d&&d.destroy()}},[d]),[d,{container:{id:n.id,ref:v,role:b,tabIndex:-1,"aria-modal":!0,"aria-hidden":!0,"aria-labelledby":j},overlay:{onClick:x?void 0:f},dialog:{role:"document"},closeButton:{type:"button",onClick:f},title:{role:"heading","aria-level":1,id:j}}]};A.useA11yDialog=S;var g=function(n){var r=E(),c=S(n),d=y(c,2),v=d[0],f=d[1],b=n.dialogRef;if(e.default.useEffect(function(){return v&&b(v),function(){return b(void 0)}},[b,v]),!r)return null;var x=n.dialogRoot?document.querySelector(n.dialogRoot):document.body,j=e.default.createElement("p",u({},f.title,{className:n.classNames.title,key:"title"}),n.title),q=e.default.createElement("button",u({},f.closeButton,{className:n.classNames.closeButton,"aria-label":n.closeButtonLabel,key:"button"}),n.closeButtonContent),K=[n.closeButtonPosition==="first"&&q,j,n.children,n.closeButtonPosition==="last"&&q].filter(Boolean);return t.default.createPortal(e.default.createElement("div",u({},f.container,{className:n.classNames.container}),e.default.createElement("div",u({},f.overlay,{className:n.classNames.overlay})),e.default.createElement("div",u({},f.dialog,{className:n.classNames.dialog}),K)),x)};return A.A11yDialog=g,g.defaultProps={role:"dialog",closeButtonLabel:"Close this dialog window",closeButtonContent:"×",closeButtonPosition:"first",classNames:{},dialogRef:function(){}},g.propTypes={role:i.default.oneOf(["dialog","alertdialog"]),id:i.default.string.isRequired,title:i.default.node.isRequired,dialogRef:i.default.func,titleId:i.default.string,closeButtonLabel:i.default.string,closeButtonContent:i.default.node,closeButtonPosition:i.default.oneOf(["first","last","none"]),dialogRoot:i.default.string,classNames:i.default.exact({container:i.default.string,overlay:i.default.string,dialog:i.default.string,title:i.default.string,closeButton:i.default.string}),children:i.default.node},A}var me=fe();function he(e){const{id:t,role:a="dialog",closeButtonLabel:i="Lukk",...l}=e,u=ne(t||"jkl-modal",{generateSuffix:!t}),[y,m]=me.useA11yDialog({id:u,role:a,...l}),{dialog:_,...k}=m,C={modal:m.dialog,...k,closeButton:{...m.closeButton,"aria-label":i}};return[y,C]}const ge=e=>{if(typeof document>"u")return;const t=document.cookie.split(";").map(a=>a.trim().split("=")).find(a=>a[0]===e);if(t)return t},pe=({adapter:e,name:t})=>{const a=ge(t);if(a)return JSON.parse(a[1]);if(e)return e()},ye=10368e3,ve=({consent:e,maxAge:t=ye,name:a,domain:i,path:l})=>{document.cookie=[`${a}=${JSON.stringify(e)}`,`max-age=${t}`,"SameSite=Lax",!!i&&`domain=${i}`,!!l&&`path=${l}`].filter(u=>u).join(";")},ke=(e,t)=>{if(!t)return Object.values(e).some(l=>l);const a=new Map(Object.entries(t)),i=Object.entries(e);for(const[l,u]of i)if(u&&a.get(l)===null)return!0;return!1},I=e=>typeof e>"u"?null:e===!1||String(e).toLowerCase()==="false"?"denied":"accepted",P=(e,t)=>({functional:t.functional?I(e.functional):void 0,statistics:t.statistics?I(e.statistics):void 0,marketing:t.marketing?I(e.marketing):void 0}),be=({marketing:e,functional:t,statistics:a})=>({...e&&{marketing:e},...t&&{functional:t},...a&&{statistics:a}}),_e="fremtind-cookie-consent",N=s.createContext(void 0),L=({children:e,cookieAdapter:t,marketing:a,functional:i,statistics:l,cookieName:u=_e,cookieDomain:y,cookiePath:m})=>{const[_,k]=w.useState(()=>Date.now()),C=w.useMemo(()=>be({marketing:a,functional:i,statistics:l}),[a,i,l]),h=w.useMemo(()=>pe({adapter:t,name:u})??{marketing:null,functional:null,statistics:null},[t,u,_]),[E,D]=w.useState(()=>ke(C,h));return s.createElement(N.Provider,{value:{isOpen:E,setIsOpen:D,updateCurrentConsents:()=>k(Date.now()),requirement:C,currentConsent:h,cookieName:u,cookieDomain:y,cookiePath:m}},e)},Ce=()=>{const e=s.useContext(N);if(e===void 0)throw new Error("CookieConsent must be used within a CookieConsentProvider");return e},Ee=()=>{const e=w.useContext(N);if(e===void 0)throw new Error("useCookieConsent must be used within a CookieConsentProvider");const t=()=>{e.setIsOpen(!0)},a=e.currentConsent;return{openConsentModal:t,consents:a}};L.__docgenInfo={description:"",methods:[],displayName:"CookieConsentProvider",props:{children:{required:!0,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},cookieAdapter:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Consent | undefined",signature:{arguments:[],return:{name:"union",raw:"Consent | undefined",elements:[{name:"signature",type:"object",raw:`{
    marketing?: ConsentState;
    functional?: ConsentState;
    statistics?: ConsentState;
}`,signature:{properties:[{key:"marketing",value:{name:"union",raw:'null | "denied" | "accepted"',elements:[{name:"null"},{name:"literal",value:'"denied"'},{name:"literal",value:'"accepted"'}],required:!1}},{key:"functional",value:{name:"union",raw:'null | "denied" | "accepted"',elements:[{name:"null"},{name:"literal",value:'"denied"'},{name:"literal",value:'"accepted"'}],required:!1}},{key:"statistics",value:{name:"union",raw:'null | "denied" | "accepted"',elements:[{name:"null"},{name:"literal",value:'"denied"'},{name:"literal",value:'"accepted"'}],required:!1}}]}},{name:"undefined"}]}}},description:""},cookieName:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"fremtind-cookie-consent"',computed:!1}},cookieDomain:{required:!1,tsType:{name:"string"},description:""},cookiePath:{required:!1,tsType:{name:"string"},description:""}}};const T=({defaultChecked:e,name:t,label:a,children:i})=>s.createElement(s.Fragment,null,s.createElement(ie,{className:"jkl-cookie-consent-modal__checkbox",value:"true",name:t,defaultChecked:e},a),s.createElement("p",{className:"jkl-cookie-consent-modal__info-text"},i));T.__docgenInfo={description:"",methods:[],displayName:"RequirementCheckbox",props:{children:{required:!0,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},defaultChecked:{required:!0,tsType:{name:"boolean"},description:""},name:{required:!0,tsType:{name:"union",raw:'"functional" | "marketing" | "statistics"',elements:[{name:"literal",value:'"functional"'},{name:"literal",value:'"marketing"'},{name:"literal",value:'"statistics"'}]},description:""},label:{required:!0,tsType:{name:"string"},description:""}}};const we=({blocking:e,onAccept:t,...a})=>{const{currentConsent:i,cookieName:l,cookieDomain:u,cookiePath:y,requirement:m,isOpen:_,setIsOpen:k,updateCurrentConsents:C}=Ce(),[h,E]=he({id:`jkl-cookie-modal-${w.useId()}`,role:e?"alertdialog":"dialog",title:"Informasjonskapsler"});if(w.useEffect(()=>{_?h?.show():h?.hide()},[h,_]),w.useEffect(()=>{const g=()=>k(!1);return h?.on("hide",g),()=>{h?.off("hide",g)}},[h,k]),typeof document>"u")return null;if(typeof navigator<"u"&&!navigator.cookieEnabled)return t&&t({functional:"denied",marketing:"denied",statistics:"denied"}),null;const D=(g=P({functional:!0,statistics:!0,marketing:!0},m))=>{const o=Object.fromEntries(Object.entries(g).filter(([,r])=>typeof r<"u")),n={...i,...o};ve({consent:n,name:l,domain:u,path:y}),C(),t?.(n),h?.hide()},S=g=>{g.preventDefault();const o=new FormData(g.currentTarget),n=P({functional:o.get("functional")==="true",statistics:o.get("statistics")==="true",marketing:o.get("marketing")==="true"},m);D(n)};return G.createPortal(s.createElement(U,{...E.container,...a,"data-cookie-consent-open":_},s.createElement(J,{...E.overlay}),s.createElement(V,{component:"form",...E.modal,onSubmit:S},s.createElement(Y,null,s.createElement(z,{...E.title},"Velg informasjonskapsler")),s.createElement(X,null,s.createElement("p",null,"For at nettsidene skal fungere må vi bruke tekniske informasjonskaplser. Disse lagres derfor uten samtykke."),m.functional&&s.createElement(T,{name:"functional",label:"Tillat funksjonelle",defaultChecked:i.functional==="accepted",key:`functional-${i.functional}`},"Funksjonelle informasjonskapsler lagrer opplysninger om din bruk av nettsidene og hvilke innstillinger du har gjort, slik at du kan få funksjonalitet tilpasset deg."),m.statistics&&s.createElement(T,{name:"statistics",label:"Tillat statistikk",defaultChecked:i.statistics==="accepted",key:`statistics-${i.statistics}`},"Informasjonskapslene lagrer statistikk som hjelper oss med å forstå hvordan nettsidene blir brukt, slik at vi kan gjøre dem bedre og enklere å bruke."),m.marketing&&s.createElement(T,{name:"marketing",label:"Tillat personlig markedsføring",defaultChecked:i.marketing==="accepted",key:`marketing-${i.marketing}`},"Dette gjør at vi kan gi deg mer relevant og tilpasset markedsføring, også gjennom våre samarbeidspartnere, på for eksempel nettsider, annonser og i sosiale medier.")),s.createElement(Q,null,s.createElement(M,{"data-testid":"jkl-cookie-consent-godta-alle",type:"button",onClick:()=>D()},"Godta alle"),s.createElement(M,{"data-testid":"jkl-cookie-consent-godta",type:"submit"},"Godta mine valg")))),document.body)},Ke={title:"Komponenter/CookieConsent",component:L,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},Ae=({children:e})=>{const{openConsentModal:t}=Ee();return s.createElement("div",null,s.createElement(H,{onClick:()=>t()},"Åpne samtykker"),e)},R={args:{children:s.createElement(Ae,null,s.createElement(we,null)),cookieName:"demo-consent-cookie",functional:!0,statistics:!0,marketing:!0}};R.parameters={...R.parameters,docs:{...R.parameters?.docs,source:{originalSource:`{
  args: {
    children: <Wrapper>
                <CookieConsentComponent />
            </Wrapper>,
    cookieName: "demo-consent-cookie",
    functional: true,
    statistics: true,
    marketing: true
  }
}`,...R.parameters?.docs?.source}}};const We=["CookieConsent"];export{R as CookieConsent,We as __namedExportsOrder,Ke as default};
