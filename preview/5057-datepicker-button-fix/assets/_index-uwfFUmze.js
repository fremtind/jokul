import{c as C}from"./clsx-B-dksMZM.js";import{r as n,R as p}from"./index-siqcju79.js";import{t as H}from"./tokens-CvksrKef.js";import{u as A}from"./useBrowserPreferences-B9LcbCiO.js";import{u as O}from"./usePreviousValue-f0kyfTHz.js";import{C as I}from"./ChevronDownIcon-fl1APhkk.js";import{C as S}from"./GreenCheckIcon-Bpa3ggY2.js";const q="standard",L="productive";function $(t,a,o,s){const e=t.current;if(!e)return;e.removeAttribute("style");const i=e.scrollHeight;o.current=requestAnimationFrame(()=>{e.style.removeProperty("transition"),e.dataset.expanded="false";const l=e.getBoundingClientRect().height;e.dataset.expanded="true",e.style.setProperty("height",`${i}px`),e.style.setProperty("overflow-y","hidden"),s.current=requestAnimationFrame(()=>{e.style.setProperty("transition",a),e.style.setProperty("height",`${l}px`),e.dataset.expanded="false"})})}function F(t,a,o,s){const e=t.current;if(!e)return;e.removeAttribute("style");const i=e.scrollHeight;o.current=requestAnimationFrame(()=>{e.style.removeProperty("transition"),e.dataset.expanded="false";const l=e.getBoundingClientRect().height;e.style.setProperty("height",`${l}px`),e.style.setProperty("overflow-y","hidden"),s.current=requestAnimationFrame(()=>{e.style.setProperty("transition",a),e.style.setProperty("height",`${i}px`),e.dataset.expanded="true"})})}function D(t,a){const o=O(t),s=a?.easing||q,e=a?.timing||L,i=`${H.motion.timing[e]} height ${H.motion.easing[s]}`,{prefersReducedMotion:l}=A(),m=n.useRef(),u=n.useRef(),c=n.useRef(null),f=n.useCallback(r=>{const d=c.current;d&&r.target===d&&(d.removeAttribute("style"),a?.onTransitionEnd?.(t,c))},[a,t]),g=n.useCallback(()=>{const r=c.current;if(r&&(o===void 0&&(r.dataset.expanded=t?"true":"false"),!(!t&&!o||t&&o))){if(a?.onTransitionStart?.(t,c),l){r.removeAttribute("style"),r.dataset.expanded=t?"true":"false",a?.onTransitionEnd?.(t,c);return}t?F(c,i,m,u):$(c,i,m,u)}},[o,t,a,l,i]);return n.useEffect(()=>{g()},[t,g]),n.useEffect(()=>{const r=c.current;return r&&r.addEventListener("transitionend",f),()=>{r&&r.removeEventListener("transitionend",f)}},[t]),n.useEffect(()=>{const r=m.current,d=u.current;return()=>{r&&cancelAnimationFrame(r),d&&cancelAnimationFrame(d)}},[]),[c,g]}const R=n.createContext({open:!1,onToggle:()=>{},onTransitionStart:()=>{},onTransitionEnd:()=>{},setExpanderHeight:()=>{}}),_=({className:t,children:a,...o})=>{const{open:s,onTransitionStart:e,onTransitionEnd:i}=n.useContext(R),[l]=D(s,{timing:"snappy",onTransitionStart:e,onTransitionEnd:i});return p.createElement("div",{ref:l,className:C("jkl-expandable__content",t),...o,"data-expanded":s,...s?{}:{inert:"true"}},p.createElement("div",{className:"jkl-expandable__content-wrapper"},a))};_.__docgenInfo={description:"",methods:[],displayName:"ExpandablePanelContent"};const B=Object.assign(p.forwardRef(function(a,o){const{children:s,as:e="details",variant:i="fill",open:l,defaultOpen:m,onOpenChange:u,className:c,...f}=a,[g,r]=n.useState(m||!1),[d,x]=n.useState(!1),[h,b]=n.useState(0),E=n.useRef();n.useImperativeHandle(o,()=>E.current,[]);const y=e,T=typeof l<"u",k=T?l:g,w=v=>{v&&x(!0)},N=()=>{T||r(v=>(u?.(!v),!v))};return n.useEffect(()=>{const v=j=>{r(j.newState==="open")},P=E.current;return P?.addEventListener("toggle",v),()=>P?.removeEventListener("toggle",v)},[]),p.createElement("div",{className:"jkl-expandable__wrapper"},p.createElement("div",{inert:"true",className:"jkl-expandable__focus-container",style:{height:h}}),p.createElement(y,{ref:E,"data-testid":"jkl-expand-section",className:C("jkl-expandable",`jkl-expandable--${i}`,c),open:e==="details"?k||d:void 0,"data-visible-content":k||d,...f},p.createElement(R.Provider,{value:{open:k,onToggle:N,onTransitionEnd:x,onTransitionStart:w,setExpanderHeight:b}},s)))}),{Content:_});B.__docgenInfo={description:"",methods:[],displayName:"ExpandablePanel",props:{as:{required:!1,tsType:{name:"ElementType"},description:`Her kan du angi hva slags element komponenten skal rendres
som. Det kan enten være en string for native HTML elementer
eller en komponent (som Link fra react-router og lignende).`},ref:{required:!1,tsType:{name:'ReactComponentPropsWithRef["ref"]',raw:'React.ComponentPropsWithRef<ElementType>["ref"]'},description:""}}};const W=p.forwardRef(function(a,o){const{children:s,as:e="summary",open:i,icon:l,className:m,onClick:u,expandDirection:c,...f}=a,g=e,{open:r,onToggle:d,setExpanderHeight:x}=n.useContext(R),h=n.useRef();n.useImperativeHandle(o,()=>h.current,[]);const b=i||r,E=c==="up"?S:I;return n.useEffect(()=>{const y=new ResizeObserver(()=>{x(h.current?.offsetHeight||64)});return h.current?(y.observe(h.current),()=>y.disconnect()):()=>{}},[x]),p.createElement(g,{ref:h,className:C("jkl-expander",{"jkl-expander--open":b},m),...e==="button"?{type:f.type||"button"}:{},onClick:y=>{y.preventDefault(),d(),u?.(y)},...f},l||null,p.createElement("span",{className:"jkl-expander__label"},s),p.createElement(E,{className:"jkl-expander__chevron"}))});W.__docgenInfo={description:"",methods:[],displayName:"Expander",props:{as:{required:!1,tsType:{name:"ElementType"},description:`Her kan du angi hva slags element komponenten skal rendres
som. Det kan enten være en string for native HTML elementer
eller en komponent (som Link fra react-router og lignende).`},ref:{required:!1,tsType:{name:'ReactComponentPropsWithRef["ref"]',raw:'React.ComponentPropsWithRef<ElementType>["ref"]'},description:""}}};export{_ as E,W as a,B as b};
