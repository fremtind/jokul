import{r as s,R as e}from"./index-siqcju79.js";import{G as W}from"./Button-Bm5jRD6q.js";import{p as S,q as z,r as Q,t as X,u as Y,f as Z,b as ee,a as ne,d as te,e as re,v as oe,w as se,i as ae,j as ie,m as le,x as me,F as ue,k as ce,g as pe,o as de,h as fe,s as ge}from"./getThemeAndDensity-Dbk6h1cS.js";import{c as ke}from"./clsx-B-dksMZM.js";import{r as q}from"./index-BpBQ4hf7.js";import{u as ye}from"./useId-CahK3IZ3.js";import{u as Ee}from"./useBrowserPreferences-B9LcbCiO.js";import{M as g}from"./MenuItem-DjdHl0XH.js";/* empty css               */import{E as ve}from"./ErrorIcon-BUXYVAIL.js";import{C as he}from"./ChevronDownIcon-fl1APhkk.js";import"./_commonjsHelpers-DaWZu8wl.js";import"./usePreviousValue-f0kyfTHz.js";import"./Loader-Dq-CBRAZ.js";import"./useDelayedRender-CQprwS1c.js";import"./index-BdKvcPYQ.js";import"./index-yL1brwCS.js";import"./ChevronRightIcon-DUrPUeX8.js";import"./Icon-mINJCSxV.js";import"./OpenInNewIcon-BZd1ooy-.js";const Me=(n,t,l)=>{const[y,E]=s.useState(!1),[c,p]=s.useState(!1);return s.useEffect(()=>{if(!n)return;function o(){p(!1)}function i(m){t&&m.nodeId!==t&&m.parentId===l&&p(!1)}return n.events.on("click",o),n.events.on("menuopen",i),()=>{n.events.off("click",o),n.events.off("menuopen",i)}},[n,t,l]),s.useEffect(()=>{c&&n&&t&&n.events.emit("menuopen",{parentId:l,nodeId:t})},[n,c,t,l]),s.useEffect(()=>{function o({pointerType:m}){m!=="touch"&&E(!0)}function i(){E(!1)}return window.addEventListener("pointermove",o,{once:!0,capture:!0}),window.addEventListener("keydown",i,!0),()=>{window.removeEventListener("pointermove",o,{capture:!0}),window.removeEventListener("keydown",i,!0)}},[y]),{allowHover:y,isOpen:c,setIsOpen:p}};function I(n,t=0){switch(n){case"top":return`0 ${t}px`;case"left":return`${t}px 0`;case"bottom":return`0 ${-t}px`;case"right":return`${-t}px 0`;default:return`0 ${t}px`}}const b=s.forwardRef((n,t)=>{const{children:l,className:y,initialPlacement:E,openOnHover:c=!1,keepOpenOnClickOutside:p=!1,triggerElement:o,isOpen:i,onToggle:m,...j}=n,F=ye("jkl-menu"),{prefersReducedMotion:R}=Ee(),h=Q(),M=X(),C=S(),d=C!=null,N=s.useRef([]),[T,P]=s.useState(null),{allowHover:x,isOpen:A,setIsOpen:D}=Me(h,M,C),f=i!==void 0?i:A;s.useEffect(()=>m?.(f),[f,m]);const{refs:O,placement:H,context:u,floatingStyles:B}=Y({nodeId:M,open:f,onOpenChange:D,placement:E||(d?"right-start":"bottom-start"),middleware:[de(2),fe({fallbackAxisSideDirection:"end",crossAxis:!1}),ge({padding:8})],whileElementsMounted:pe}),{getReferenceProps:L,getFloatingProps:$,getItemProps:K}=Z([ee(u,{enabled:c&&x,delay:{open:75},handleClose:se({requireIntent:!0,blockPointerEvents:!0})}),ne(u,{event:"mousedown"}),te(u,{outsidePress:!p}),re(u,{role:"menu"}),oe(u,{listRef:N,activeIndex:T,nested:d,onNavigate:P})]),G=ae([O.setReference,t]),{theme:_,density:J}=ie(O.reference.current),{isMounted:V,styles:U}=le(u,{duration:{open:R?0:250,close:R?0:150},initial:({side:r})=>({opacity:0,translate:I(r,5)}),open:({side:r})=>({opacity:1,translate:I(r,0)}),close:({side:r})=>({opacity:0,translate:I(r,5)})});return e.createElement(me,{id:M},e.isValidElement(o)&&(o.type==="button"||q.isForwardRef(o))?e.cloneElement(o,{...L({...j,ref:G,role:d?"menuitem":void 0,"aria-controls":F,onClick(r){r.stopPropagation()}})}):o,V&&e.createElement(ue,null,e.createElement(ce,{context:u,modal:!1,initialFocus:d?-1:0,returnFocus:!d},e.createElement("div",{className:ke("jkl jkl-menu",y),"data-theme":_,"data-layout-density":J,role:"menu","data-placement":H,"aria-live":"assertive","aria-hidden":!f,ref:O.setFloating,...$({id:F,style:{...B,...U}})},e.Children.map(l,(r,w)=>e.isValidElement(r)&&q.isForwardRef(r)?e.cloneElement(r,K({...r.props,tabIndex:T===w?0:-1,role:"menuitem",ref(a){N.current[w]=a},onClick(a){r.props.onClick?.(a),!a.defaultPrevented&&h?.events.emit("click")},onKeyDown(a){r.props.onKeyDown?.(a),!a.defaultPrevented&&(h?.events.emit("keydown"),a.currentTarget.role==="menuitemcheckbox"&&a.key==="Enter"&&D(!1))},onMouseEnter(){x&&f&&P(w)}})):r)))))});b.displayName="MenuComponent";const k=s.forwardRef((n,t)=>S()===null?e.createElement(z,null,e.createElement(b,{ref:t,...n})):e.createElement(b,{ref:t,...n}));k.displayName="Menu";k.__docgenInfo={description:"",methods:[],displayName:"Menu",props:{"data-testautoid":{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},initialPlacement:{required:!1,tsType:{name:"Placement"},description:`Initiell plassering av menyen. Dersom det ikke er plass på skjermen der du
angir at den skal åpnes vil den slyttes automatisk.
@default "bottom-start" på toppnivå, "right-start" for undermenyer`},openOnHover:{required:!1,tsType:{name:"boolean"},description:`Angir om menyen skal åpnes ved hover (uten å måtte klikke)
@default false`},keepOpenOnClickOutside:{required:!1,tsType:{name:"boolean"},description:`Angir om menyen skal holdes åpen når man klikker utenfor menyen
@default false`},triggerElement:{required:!0,tsType:{name:"ReactNode"},description:'Elementet som fungerer som trigger for menyen. Dersom elementet ikke er en `<button type="button">`\neller en `forwardRef<HTMLButtonElement>` vil det bli lagt inne i en knapp\nmed forhåndsdefinert stil. For å komme raskt i gang kan du bruke komponenten\n`MenuTriggerButton` fra denne pakken.'},isOpen:{required:!1,tsType:{name:"boolean"},description:`Kan brukes til å styre utenfra om menyen skal være åpen eller ikke.
@default false`},onToggle:{required:!1,tsType:{name:"signature",type:"function",raw:"(isOpen: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isOpen"}],return:{name:"void"}}},description:"Callback som kalles når menyen åpnes eller lukkes."}},composes:["Omit"]};const Ke={title:"Komponenter/Menu/Menu",component:k,parameters:{layout:"centered"},tags:["autodocs"]},v={args:{triggerElement:e.createElement(W,{icon:e.createElement(he,{bold:!0}),iconPosition:"right","data-testid":"open-menu"},"Ola Nordmann"),keepOpenOnClickOutside:!1,children:e.createElement(e.Fragment,null,e.createElement(g,null,"Forsikringsprofil"),e.createElement(k,{triggerElement:e.createElement(g,{expandable:!0},"Dokumenter")}," ",e.createElement(g,{as:"a",href:"https://jokul.fremtind.no/"},"Jøkuls hjemmeside"),e.createElement(g,{as:"a",href:"https://fremtind.no/"},"Fremtind Forsikring")),e.createElement(g,{icon:e.createElement(ve,null)},"Skadesaker")),isOpen:!1},render:({...n})=>e.createElement(k,{...n})};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  args: {
    triggerElement: <GhostButton icon={<ChevronDownIcon bold />} iconPosition="right" data-testid="open-menu">
                Ola Nordmann
            </GhostButton>,
    keepOpenOnClickOutside: false,
    children: <>
                <MenuItem>Forsikringsprofil</MenuItem>
                <MenuComponent triggerElement={<MenuItem expandable={true}>Dokumenter</MenuItem>}>
                    {" "}
                    <MenuItem as="a" href="https://jokul.fremtind.no/">
                        Jøkuls hjemmeside
                    </MenuItem>
                    <MenuItem as="a" href="https://fremtind.no/">
                        Fremtind Forsikring
                    </MenuItem>
                </MenuComponent>

                <MenuItem icon={<ErrorIcon />}>Skadesaker</MenuItem>
            </>,
    isOpen: false
  },
  render: ({
    ...args
  }) => <MenuComponent {...args} />
}`,...v.parameters?.docs?.source}}};const Ge=["Menu"];export{v as Menu,Ge as __namedExportsOrder,Ke as default};
