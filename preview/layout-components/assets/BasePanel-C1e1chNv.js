import{j as s}from"./jsx-runtime-D9p_MChh.js";import{c as y}from"./clsx-B-dksMZM.js";import{r as t}from"./index-CRL2yuNo.js";import{t as _}from"./tokens-NmszT_nq.js";import{u as b}from"./useBrowserPreferences-pnXkstjW.js";import{u as g}from"./usePreviousValue-B4HAJZS8.js";const k="standard",P="expressive";function E(l,d){const i=g(l),[c,a]=t.useState(0),v=k,p=P,o=`${_.motion.timing[p]} height ${_.motion.easing[v]}`,{prefersReducedMotion:f}=b(),h=t.useRef(),u=t.useRef(),r=t.useRef(null),m=t.useCallback(e=>{const n=r.current;n&&e.target===n&&n.removeAttribute("style")},[d]),x=t.useCallback(()=>{const e=r.current;if(!e)return;e.removeAttribute("style");const n=e.scrollHeight;h.current=requestAnimationFrame(()=>{e.style.removeProperty("transition"),e.style.setProperty("height",`${c}px`),e.style.setProperty("overflow-y","hidden"),u.current=requestAnimationFrame(()=>{e.style.setProperty("transition",o),e.style.setProperty("height",`${n}px`)})}),a(n)},[o,c]),j=t.useCallback(()=>{const e=r.current;if(e){if(i===void 0){a(e.scrollHeight);return}l!==i&&(f||x())}},[x,l,i,d,f]);return t.useEffect(()=>{j()},[l,j]),t.useEffect(()=>{const e=r.current;return e&&e.addEventListener("transitionend",m),()=>{e&&e.removeEventListener("transitionend",m)}},[m]),t.useEffect(()=>{const e=h.current,n=u.current;return()=>{e&&cancelAnimationFrame(e),n&&cancelAnimationFrame(n)}},[]),r}const A=t.forwardRef(function({className:d,isChecked:i,children:c,alwaysOpen:a,label:v,extraLabel:p,type:o,...f},h){const u=`content-${t.useId()}`,r=`input-${t.useId()}`,m=t.Children.count(c)>0,x=E(i);return s.jsxs("div",{className:y("jkl-input-panel",`jkl-${o}-panel`,d),children:[s.jsxs("label",{className:"jkl-input-panel__label",htmlFor:r,children:[s.jsx("input",{ref:h,id:r,className:"jkl-input-panel__input",type:o,"aria-controls":a?void 0:u,"aria-expanded":a?void 0:i,...f}),s.jsx("span",{"aria-hidden":"true",className:`jkl-${o}-panel__decorator`}),s.jsx("span",{className:"jkl-input-panel__main-label",children:v}),s.jsx("span",{className:y("jkl-input-panel__extra-label",{"jkl-input-panel__extra-label--text":typeof p=="string"}),children:p})]}),m&&s.jsx("div",{ref:x,"aria-hidden":!i&&!a,children:s.jsx("div",{className:"jkl-input-panel__content",id:u,"data-alwaysopen":a,children:c})})]})});A.__docgenInfo={description:"",methods:[],displayName:"BasePanel",props:{isChecked:{required:!0,tsType:{name:"boolean"},description:""},alwaysOpen:{required:!0,tsType:{name:"boolean"},description:""},label:{required:!0,tsType:{name:"string"},description:""},extraLabel:{required:!1,tsType:{name:"ReactNode"},description:""},type:{required:!0,tsType:{name:"union",raw:'"radio" | "checkbox"',elements:[{name:"literal",value:'"radio"'},{name:"literal",value:'"checkbox"'}]},description:""}}};export{A as B};
