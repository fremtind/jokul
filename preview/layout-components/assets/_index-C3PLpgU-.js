import{j as m}from"./jsx-runtime-BbjHj44Y.js";import{c as j}from"./clsx-B-dksMZM.js";import{r,R as H}from"./index-C6mWTJJr.js";import{t as C}from"./tokens-DyQL8Q6a.js";import{u as I}from"./useBrowserPreferences-Cx8DRHte.js";import{u as O}from"./usePreviousValue-ByfnePFg.js";import{C as S}from"./ChevronDownIcon-Cfz6obIC.js";import{C as q}from"./GreenCheckIcon-CEvp5a4N.js";const L="standard",$="productive";function F(n,t,s,l){const e=n.current;if(!e)return;e.removeAttribute("style");const i=e.scrollHeight;s.current=requestAnimationFrame(()=>{e.style.removeProperty("transition"),e.dataset.expanded="false";const c=e.getBoundingClientRect().height;e.dataset.expanded="true",e.style.setProperty("height",`${i}px`),e.style.setProperty("overflow-y","hidden"),l.current=requestAnimationFrame(()=>{e.style.setProperty("transition",t),e.style.setProperty("height",`${c}px`),e.dataset.expanded="false"})})}function D(n,t,s,l){const e=n.current;if(!e)return;e.removeAttribute("style");const i=e.scrollHeight;s.current=requestAnimationFrame(()=>{e.style.removeProperty("transition"),e.dataset.expanded="false";const c=e.getBoundingClientRect().height;e.style.setProperty("height",`${c}px`),e.style.setProperty("overflow-y","hidden"),l.current=requestAnimationFrame(()=>{e.style.setProperty("transition",t),e.style.setProperty("height",`${i}px`),e.dataset.expanded="true"})})}function B(n,t){const s=O(n),l=(t==null?void 0:t.easing)||L,e=(t==null?void 0:t.timing)||$,i=`${C.motion.timing[e]} height ${C.motion.easing[l]}`,{prefersReducedMotion:c}=I(),p=r.useRef(),u=r.useRef(),d=r.useRef(null),g=r.useCallback(a=>{var f;const o=d.current;o&&a.target===o&&(o.removeAttribute("style"),(f=t==null?void 0:t.onTransitionEnd)==null||f.call(t,n,d))},[t,n]),h=r.useCallback(()=>{var o,f;const a=d.current;if(a&&(s===void 0&&(a.dataset.expanded=n?"true":"false"),!(!n&&!s||n&&s))){if((o=t==null?void 0:t.onTransitionStart)==null||o.call(t,n,d),c){a.removeAttribute("style"),a.dataset.expanded=n?"true":"false",(f=t==null?void 0:t.onTransitionEnd)==null||f.call(t,n,d);return}n?D(d,i,p,u):F(d,i,p,u)}},[s,n,t,c,i]);return r.useEffect(()=>{h()},[n,h]),r.useEffect(()=>{const a=d.current;return a&&a.addEventListener("transitionend",g),()=>{a&&a.removeEventListener("transitionend",g)}},[n]),r.useEffect(()=>{const a=p.current,o=u.current;return()=>{a&&cancelAnimationFrame(a),o&&cancelAnimationFrame(o)}},[]),[d,h]}const P=r.createContext({open:!1,onToggle:()=>{},onTransitionStart:()=>{},onTransitionEnd:()=>{},setExpanderHeight:()=>{}}),_=({className:n,children:t,...s})=>{const{open:l,onTransitionStart:e,onTransitionEnd:i}=r.useContext(P),[c]=B(l,{timing:"snappy",onTransitionStart:e,onTransitionEnd:i});return m.jsx("div",{ref:c,className:j("jkl-expandable__content",n),...s,"data-expanded":l,...l?{}:{inert:"true"},children:m.jsx("div",{className:"jkl-expandable__content-wrapper",children:t})})};_.__docgenInfo={description:"",methods:[],displayName:"ExpandablePanelContent"};const W=Object.assign(H.forwardRef(function(t,s){const{children:l,as:e="details",variant:i="fill",open:c,defaultOpen:p,onOpenChange:u,className:d,...g}=t,[h,a]=r.useState(p||!1),[o,f]=r.useState(!1),[x,R]=r.useState(0),E=r.useRef();r.useImperativeHandle(s,()=>E.current,[]);const y=e,k=typeof c<"u",T=k?c:h,w=v=>{v&&f(!0)},N=()=>{k||a(v=>(u==null||u(!v),!v))};return r.useEffect(()=>{const v=A=>{a(A.newState==="open")},b=E.current;return b==null||b.addEventListener("toggle",v),()=>b==null?void 0:b.removeEventListener("toggle",v)},[]),m.jsxs("div",{className:"jkl-expandable__wrapper",children:[m.jsx("div",{inert:"true",className:"jkl-expandable__focus-container",style:{height:x}}),m.jsx(y,{ref:E,"data-testid":"jkl-expand-section",className:j("jkl-expandable",`jkl-expandable--${i}`,d),open:e==="details"?T||o:void 0,"data-visible-content":T||o,...g,children:m.jsx(P.Provider,{value:{open:T,onToggle:N,onTransitionEnd:f,onTransitionStart:w,setExpanderHeight:R},children:l})})]})}),{Content:_});W.__docgenInfo={description:"",methods:[],displayName:"ExpandablePanel",props:{as:{required:!1,tsType:{name:"ElementType"},description:`Her kan du angi hva slags element komponenten skal rendres
som. Det kan enten være en string for native HTML elementer
eller en komponent (som Link fra react-router og lignende).`},ref:{required:!1,tsType:{name:'ReactComponentPropsWithRef["ref"]',raw:'React.ComponentPropsWithRef<ElementType>["ref"]'},description:""}}};const M=H.forwardRef(function(t,s){const{children:l,as:e="summary",open:i,icon:c,className:p,onClick:u,expandDirection:d,...g}=t,h=e,{open:a,onToggle:o,setExpanderHeight:f}=r.useContext(P),x=r.useRef();r.useImperativeHandle(s,()=>x.current,[]);const R=i||a,E=d==="up"?q:S;return r.useEffect(()=>{const y=new ResizeObserver(()=>{var k;f(((k=x.current)==null?void 0:k.offsetHeight)||64)});return x.current?(y.observe(x.current),()=>y.disconnect()):()=>{}},[f]),m.jsxs(h,{ref:x,className:j("jkl-expander",{"jkl-expander--open":R},p),...e==="button"?{type:g.type||"button"}:{},onClick:y=>{y.preventDefault(),o(),u==null||u(y)},...g,children:[c||null,m.jsx("span",{className:"jkl-expander__label",children:l}),m.jsx(E,{className:"jkl-expander__chevron"})]})});M.__docgenInfo={description:"",methods:[],displayName:"Expander",props:{as:{required:!1,tsType:{name:"ElementType"},description:`Her kan du angi hva slags element komponenten skal rendres
som. Det kan enten være en string for native HTML elementer
eller en komponent (som Link fra react-router og lignende).`},ref:{required:!1,tsType:{name:'ReactComponentPropsWithRef["ref"]',raw:'React.ComponentPropsWithRef<ElementType>["ref"]'},description:""}}};export{W as E,M as a,_ as b};
