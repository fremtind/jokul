import{r as a,j as t,R as O}from"./iframe-Y1OcjnNo.js";import{B as w,P as D}from"./Button-BdSr4osm.js";import{R as P}from"./index-qmP0S3gy.js";import{M as T,a as N,b as R,c as q,d as _,f as I,g as L}from"./Modal-O6YUdtIL.js";import{u as $}from"./useModal-DXkxcGZi.js";import{F as B}from"./Flex-boLiJ3B9.js";import{L as F}from"./Link-CMLYyzaD.js";/* empty css               */import"./preload-helper-PPVm8Dsz.js";import"./clsx-B-dksMZM.js";import"./usePreviousValue-CZ_PVXKc.js";import"./Loader-B9YF6j_m.js";import"./useDelayedRender-Cpdobcwp.js";import"./index-gGMM2370.js";import"./IconButton-BENjpXjN.js";import"./CloseIcon-BZMpF08X.js";import"./Icon-DOc9L9Ko.js";import"./index-Chjiymov.js";import"./useId-i3O22uCG.js";import"./tokens-d2GYn7oW.js";import"./SlotComponent-D2alC9TM.js";import"./mergeRefs-D8-VVBVm.js";const A=e=>{if(typeof document>"u")return;const n=document.cookie.split(";").map(o=>o.trim().split("=")).find(o=>o[0]===e);if(n)return n},W=({adapter:e,name:n})=>{const o=A(n);if(o)return JSON.parse(o[1]);if(e)return e()},J=10368e3,H=({consent:e,maxAge:n=J,name:o,domain:s,path:r})=>{document.cookie=[`${o}=${JSON.stringify(e)}`,`max-age=${n}`,"SameSite=Lax",!!s&&`domain=${s}`,!!r&&`path=${r}`].filter(c=>c).join(";")},K=(e,n)=>{if(!n)return Object.values(e).some(r=>r);const o=new Map(Object.entries(n)),s=Object.entries(e);for(const[r,c]of s)if(c&&o.get(r)===null)return!0;return!1},y=e=>typeof e>"u"?null:e===!1||String(e).toLowerCase()==="false"?"denied":"accepted",b=(e,n)=>({functional:n.functional?y(e.functional):void 0,statistics:n.statistics?y(e.statistics):void 0}),U=({functional:e,statistics:n})=>({...e&&{functional:e},...n&&{statistics:n}}),V="fremtind-cookie-consent",v=O.createContext(void 0),M=({children:e,cookieAdapter:n,functional:o,statistics:s,cookieName:r=V,cookieDomain:c,cookiePath:h})=>{const[g,m]=a.useState(()=>Date.now()),l=a.useMemo(()=>U({functional:o,statistics:s}),[o,s]),u=a.useMemo(()=>W({adapter:n,name:r})??{functional:null,statistics:null},[n,r,g]),[j,i]=a.useState(()=>K(l,u));return t.jsx(v.Provider,{value:{isOpen:j,setIsOpen:i,updateCurrentConsents:()=>m(Date.now()),requirement:l,currentConsent:u,cookieName:r,cookieDomain:c,cookiePath:h},children:e})},G=()=>{const e=O.useContext(v);if(e===void 0)throw new Error("CookieConsent must be used within a CookieConsentProvider");return e},X=()=>{const e=a.useContext(v);if(e===void 0)throw new Error("useCookieConsent must be used within a CookieConsentProvider");const n=()=>{e.setIsOpen(!0)},o=e.currentConsent;return{openConsentModal:n,consents:o}};M.__docgenInfo={description:"",methods:[],displayName:"CookieConsentProvider",props:{children:{required:!0,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},cookieAdapter:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Consent | undefined",signature:{arguments:[],return:{name:"union",raw:"Consent | undefined",elements:[{name:"signature",type:"object",raw:`{
    functional?: ConsentState;
    statistics?: ConsentState;
}`,signature:{properties:[{key:"functional",value:{name:"union",raw:'null | "denied" | "accepted"',elements:[{name:"null"},{name:"literal",value:'"denied"'},{name:"literal",value:'"accepted"'}],required:!1}},{key:"statistics",value:{name:"union",raw:'null | "denied" | "accepted"',elements:[{name:"null"},{name:"literal",value:'"denied"'},{name:"literal",value:'"accepted"'}],required:!1}}]}},{name:"undefined"}]}}},description:""},cookieName:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"fremtind-cookie-consent"',computed:!1}},cookieDomain:{required:!1,tsType:{name:"string"},description:""},cookiePath:{required:!1,tsType:{name:"string"},description:""}}};const z=({blocking:e,onAccept:n,aboutPage:o="https://www.fremtind.no/informasjonskapsler",...s})=>{const{currentConsent:r,cookieName:c,cookieDomain:h,cookiePath:g,requirement:m,isOpen:l,setIsOpen:u,updateCurrentConsents:j}=G(),[i,p]=$({id:`jkl-cookie-modal-${a.useId()}`,role:e?"alertdialog":"dialog",title:"Informasjonskapsler"});if(a.useEffect(()=>{l?i?.show():i?.hide()},[i,l]),a.useEffect(()=>{const d=()=>u(!1);return i?.on("hide",d),()=>{i?.off("hide",d)}},[i,u]),typeof document>"u")return null;if(typeof navigator<"u"&&!navigator.cookieEnabled)return n&&n({functional:"denied",statistics:"denied"}),null;const x=(d=b({functional:!0,statistics:!0},m))=>{const f=Object.fromEntries(Object.entries(d).filter(([,S])=>typeof S<"u")),C={...r,...f};H({consent:C,name:c,domain:h,path:g}),j(),n?.(C),i?.hide()},E=d=>{d.preventDefault();const f=new FormData(d.currentTarget),C=b({functional:f.get("functional")==="true",statistics:f.get("statistics")==="true"},m);x(C)};return P.createPortal(t.jsxs(T,{...p.container,...s,"data-cookie-consent-open":l,children:[t.jsx(N,{...p.overlay}),t.jsx(R,{component:"form",...p.modal,onSubmit:E,children:t.jsxs("form",{children:[t.jsx(q,{children:t.jsx(_,{...p.title,children:"Får vi bruke valgfrie informasjonskapsler?"})}),t.jsx(I,{children:t.jsxs(B,{direction:"column",gap:"m",children:[t.jsx("p",{children:"Vi ønsker å samle anonym statistikk for å forstå hvordan nettsidene våre brukes. Det hjelper oss til å gjøre innhold og løsninger bedre og mer brukervennlige."}),t.jsxs("p",{children:[t.jsx(F,{href:o,target:"_blank",children:"Les mer om hvilke informasjonskapsler vi lagrer her"}),"."]})]})}),t.jsxs(L,{children:[t.jsx(w,{variant:"secondary","data-testid":"jkl-cookie-consent-godta-alle",type:"button",onClick:()=>x(),children:"Ja, det er greit"}),t.jsx(w,{variant:"secondary","data-testid":"jkl-cookie-consent-godta",type:"submit",children:"Nei takk"})]})]})})]}),document.body)},ve={title:"Komponenter/CookieConsent",component:M,args:{cookieName:"demo-consent-cookie",functional:!0,statistics:!0}},Q=({children:e})=>{const{openConsentModal:n}=X();return t.jsxs("div",{children:[t.jsx(D,{onClick:()=>n(),children:"Åpne samtykker"}),e]})},k={args:{children:t.jsx(Q,{children:t.jsx(z,{aboutPage:"https://www.fremtind.no/informasjonskapsler"})})}};k.parameters={...k.parameters,docs:{...k.parameters?.docs,source:{originalSource:`{
  args: {
    children: <Wrapper>
                <CookieConsentComponent aboutPage="https://www.fremtind.no/informasjonskapsler" />
            </Wrapper>
  }
}`,...k.parameters?.docs?.source}}};const xe=["CookieConsent"];export{k as CookieConsent,xe as __namedExportsOrder,ve as default};
