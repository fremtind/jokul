import{b as q}from"./index-siqcju79.js";import{r as F}from"./index-yL1brwCS.js";import{a as O}from"./_commonjsHelpers-DaWZu8wl.js";import{r as T}from"./index-Chjiymov.js";import{u as N}from"./useId-CahK3IZ3.js";var m={},P=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'],M="Tab",K="Escape";function d(t){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=t,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}d.prototype.create=function(){this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=_('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach((function(n){n.addEventListener("click",this._show)}).bind(this));const t=this.$el;return this._closers=_("[data-a11y-dialog-hide]",this.$el).filter(function(n){return n.closest('[aria-modal="true"], [data-a11y-dialog]')===t}).concat(_('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach((function(n){n.addEventListener("click",this._hide)}).bind(this)),this._fire("create"),this};d.prototype.show=function(t){return this.shown?this:(this._previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,R(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",t),this)};d.prototype.hide=function(t){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",t),this):this};d.prototype.destroy=function(){return this.hide(),this._openers.forEach((function(t){t.removeEventListener("click",this._show)}).bind(this)),this._closers.forEach((function(t){t.removeEventListener("click",this._hide)}).bind(this)),this._fire("destroy"),this._listeners={},this};d.prototype.on=function(t,n){return typeof this._listeners[t]>"u"&&(this._listeners[t]=[]),this._listeners[t].push(n),this};d.prototype.off=function(t,n){var u=(this._listeners[t]||[]).indexOf(n);return u>-1&&this._listeners[t].splice(u,1),this};d.prototype._fire=function(t,n){var u=this._listeners[t]||[],a=new CustomEvent(t,{detail:n});this.$el.dispatchEvent(a),u.forEach((function(y){y(this.$el,n)}).bind(this))};d.prototype._bindKeypress=function(t){const n=document.activeElement;n&&n.closest('[aria-modal="true"]')!==this.$el||(this.shown&&t.key===K&&this.$el.getAttribute("role")!=="alertdialog"&&(t.preventDefault(),this.hide(t)),this.shown&&t.key===M&&W(this.$el,t))};d.prototype._maintainFocus=function(t){this.shown&&!t.target.closest('[aria-modal="true"]')&&!t.target.closest("[data-a11y-dialog-ignore-focus-trap]")&&R(this.$el)};function j(t){return Array.prototype.slice.call(t)}function _(t,n){return j((n||document).querySelectorAll(t))}function R(t){var n=t.querySelector("[autofocus]")||t;n.focus()}function H(t){return _(P.join(","),t).filter(function(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)})}function W(t,n){var u=H(t),a=u.indexOf(document.activeElement);n.shiftKey&&a===0?(u[u.length-1].focus(),n.preventDefault()):!n.shiftKey&&a===u.length-1&&(u[0].focus(),n.preventDefault())}function D(){_("[data-a11y-dialog]").forEach(function(t){new d(t)})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",D):window.requestAnimationFrame?window.requestAnimationFrame(D):window.setTimeout(D,16));const Y=Object.freeze(Object.defineProperty({__proto__:null,default:d},Symbol.toStringTag,{value:"Module"})),z=O(Y);var I;function U(){if(I)return m;I=1,Object.defineProperty(m,"__esModule",{value:!0}),m.useA11yDialog=m.A11yDialog=void 0;var t=y(q()),n=y(F()),u=y(z),a=y(T());function y(i){return i&&i.__esModule?i:{default:i}}function f(){return f=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])}return i},f.apply(this,arguments)}function g(i,e){return B(i)||E(i,e)||$(i,e)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(i,e){if(i){if(typeof i=="string")return p(i,e);var o=Object.prototype.toString.call(i).slice(8,-1);if(o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set")return Array.from(i);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return p(i,e)}}function p(i,e){(e==null||e>i.length)&&(e=i.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=i[o];return r}function E(i,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var o=[],r=!0,s=!1,c=void 0;try{for(var l=i[Symbol.iterator](),h;!(r=(h=l.next()).done)&&(o.push(h.value),!(e&&o.length===e));r=!0);}catch(v){s=!0,c=v}finally{try{!r&&l.return!=null&&l.return()}finally{if(s)throw c}}return o}}function B(i){if(Array.isArray(i))return i}var k=function(){var e=t.default.useState(!1),o=g(e,2),r=o[0],s=o[1];return t.default.useEffect(function(){return s(!0)},[]),r},C=function(){var e=t.default.useState(null),o=g(e,2),r=o[0],s=o[1],c=t.default.useCallback(function(l){l!==null&&s(new u.default(l))},[]);return[r,c]},x=function(e){var o=C(),r=g(o,2),s=r[0],c=r[1],l=t.default.useCallback(function(){return s.hide()},[s]),h=e.role||"dialog",v=h==="alertdialog",A=e.titleId||e.id+"-title";return t.default.useEffect(function(){return function(){s&&s.destroy()}},[s]),[s,{container:{id:e.id,ref:c,role:h,tabIndex:-1,"aria-modal":!0,"aria-hidden":!0,"aria-labelledby":A},overlay:{onClick:v?void 0:l},dialog:{role:"document"},closeButton:{type:"button",onClick:l},title:{role:"heading","aria-level":1,id:A}}]};m.useA11yDialog=x;var w=function(e){var o=k(),r=x(e),s=g(r,2),c=s[0],l=s[1],h=e.dialogRef;if(t.default.useEffect(function(){return c&&h(c),function(){return h(void 0)}},[h,c]),!o)return null;var v=e.dialogRoot?document.querySelector(e.dialogRoot):document.body,A=t.default.createElement("p",f({},l.title,{className:e.classNames.title,key:"title"}),e.title),S=t.default.createElement("button",f({},l.closeButton,{className:e.classNames.closeButton,"aria-label":e.closeButtonLabel,key:"button"}),e.closeButtonContent),L=[e.closeButtonPosition==="first"&&S,A,e.children,e.closeButtonPosition==="last"&&S].filter(Boolean);return n.default.createPortal(t.default.createElement("div",f({},l.container,{className:e.classNames.container}),t.default.createElement("div",f({},l.overlay,{className:e.classNames.overlay})),t.default.createElement("div",f({},l.dialog,{className:e.classNames.dialog}),L)),v)};return m.A11yDialog=w,w.defaultProps={role:"dialog",closeButtonLabel:"Close this dialog window",closeButtonContent:"Ã—",closeButtonPosition:"first",classNames:{},dialogRef:function(){}},w.propTypes={role:a.default.oneOf(["dialog","alertdialog"]),id:a.default.string.isRequired,title:a.default.node.isRequired,dialogRef:a.default.func,titleId:a.default.string,closeButtonLabel:a.default.string,closeButtonContent:a.default.node,closeButtonPosition:a.default.oneOf(["first","last","none"]),dialogRoot:a.default.string,classNames:a.default.exact({container:a.default.string,overlay:a.default.string,dialog:a.default.string,title:a.default.string,closeButton:a.default.string}),children:a.default.node},m}var G=U();function tt(t){const{id:n,role:u="dialog",closeButtonLabel:a="Lukk",...y}=t,f=N(n||"jkl-modal",{generateSuffix:!n}),[g,b]=G.useA11yDialog({id:f,role:u,...y}),{dialog:$,...p}=b,E={modal:b.dialog,...p,closeButton:{...b.closeButton,"aria-label":a}};return[g,E]}export{tt as u};
