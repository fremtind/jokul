import{j as e}from"./jsx-runtime-BbjHj44Y.js";import{f as I,u as T,F as N}from"./fileInputContext-N9PN3oEW.js";import{c as F}from"./clsx-B-dksMZM.js";import{r as g}from"./index-C6mWTJJr.js";import{F as E}from"./FieldGroup-N7mmNkks.js";import"./formatNumber-DzIwhxNg.js";import"./_commonjsHelpers-BosuxZz1.js";import"./useId-Cim48cX5.js";import"./Label-BXM8Y3EV.js";import"./SupportLabel-C7bte_xT.js";import"./ErrorIcon-CkY3zaKI.js";import"./Icon-CZwjvlw8.js";import"./WarningIcon-cDQuZniO.js";function C(a,r="",i){var s;const l=r.split(",").map(t=>t.toLowerCase()).map(t=>t.replaceAll("*","")).map(t=>t.trim());let o=l.length===0;if(o=l.some(t=>a.type.toLowerCase().includes(t)||a.name.toLowerCase().endsWith(t)),!o)return{type:"WRONG_TYPE",message:`Filtypen ${((s=a.name)==null?void 0:s.split(".")[1])||""} støttes ikke`};if(typeof i<"u"&&a.size>i)return{type:"TOO_LARGE",message:`Filen er ${I(a.size)}, men kan maksimalt være ${I(i)}`}}const v=g.forwardRef((a,r)=>{const{children:i,...l}=a,[o,s]=g.useState(""),t=T();if(!t)return e.jsx("p",{children:"Dropzone must be placed inside a FileInputContextProvider."});const{maxSizeBytes:m,accept:d,onChange:c}=t;return e.jsx("div",{...l,ref:r,className:F("jkl-file-input__dropzone",o),onDragEnter:n=>{s("jkl-file-input__dropzone--enter"),n.preventDefault()},onDragOver:n=>{s("jkl-file-input__dropzone--enter"),n.preventDefault()},onDrop:n=>{n.preventDefault(),s(""),n.dataTransfer.files&&c(n,[...n.dataTransfer.files].map(u=>({file:u,state:"success",validation:C(u,d,m),uploadProgress:0})))},onDragLeave:n=>{s(""),n.preventDefault()},children:i})});v.displayName="Dropzone";v.__docgenInfo={description:"",methods:[],displayName:"Dropzone",props:{children:{required:!0,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""}}};const h=g.forwardRef((a,r)=>{const{multiple:i,id:l,label:o,...s}=a,t=g.useId(),m=`${l}-description`,d=i?"filer":"fil",c=T();if(!c)return e.jsx("p",{children:"Input must be placed inside a FileInputContextProvider."});const{accept:n,maxSizeBytes:u,onChange:x}=c,f=l||t;return e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"jkl-button jkl-button--secondary",htmlFor:f,id:`${f}__add-btn`,children:o}),e.jsx("input",{...s,ref:r,id:f,accept:n,"aria-describedby":u?m:void 0,className:"jkl-sr-only",type:"file",multiple:i,value:"",onChange:p=>{p.target.files&&x(p,[...p.target.files].map(b=>({file:b,state:"success",validation:C(b,n,u),uploadProgress:0})))}}),e.jsxs("p",{className:"jkl-file-input__dropzone-hint",children:["eller slipp ",d," her"]})," "]})});h.displayName="Input";h.__docgenInfo={description:"",methods:[],displayName:"Input",props:{id:{required:!1,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"string"},description:""},multiple:{required:!0,tsType:{name:"boolean"},description:""}}};const _=({id:a})=>{const r=T();if(!r)return e.jsx("p",{children:"MaxSize must be placed inside a FileInputContextProvider."});const{maxSizeBytes:i}=r;return typeof i>"u"?!1:e.jsxs("div",{id:a,className:"jkl-file-input__max-size-text",children:["Maks ",I(i)," per fil"]})};_.__docgenInfo={description:"",methods:[],displayName:"MaxSize",props:{id:{required:!0,tsType:{name:"string"},description:""}}};const j=g.forwardRef((a,r)=>{const{accept:i,className:l,children:o,id:s,value:t,density:m,multiple:d=!0,maxSizeBytes:c,onChange:n,variant:u,...x}=a,f=t.length>0,p=g.useId();return u==="small"?e.jsx(N,{context:{accept:i,onChange:n,maxSizeBytes:c,files:t},children:e.jsxs(E,{className:F("jkl-file-input","jkl-file-input--small",l,{"jkl-file-input--has-files":f}),"data-layout-density":m||"compact",...x,children:[e.jsx(v,{children:e.jsx("div",{className:"jkl-file-input__call-to-action",children:e.jsx(h,{id:s,label:"Legg til fil",multiple:d,ref:r,"aria-describedby":p})})}),e.jsx(_,{id:p}),t.length>0&&e.jsx("ul",{className:"jkl-file-input__files",children:o})]})}):e.jsx(N,{context:{accept:i,onChange:n,maxSizeBytes:c,files:t},children:e.jsx(E,{className:F("jkl-file-input",l,{"jkl-file-input--has-files":f}),"data-layout-density":m,...x,children:e.jsxs(v,{children:[t.length>0&&e.jsx("ul",{className:"jkl-file-input__files",children:o}),e.jsxs("div",{className:"jkl-file-input__call-to-action",children:[e.jsx(h,{id:s,label:d&&f?"Legg til flere filer":"Legg til fil",multiple:d,ref:r,"aria-describedby":p}),e.jsx(_,{id:p})]})]})})})});j.displayName="FileInput";j.__docgenInfo={description:"",methods:[],displayName:"FileInput",props:{className:{required:!1,tsType:{name:"string"},description:""},id:{required:!1,tsType:{name:"string"},description:""},density:{required:!1,tsType:{name:"union",raw:'"comfortable" | "compact"',elements:[{name:"literal",value:'"comfortable"'},{name:"literal",value:'"compact"'}]},description:""},accept:{required:!1,tsType:{name:"union",raw:'"image/*" | ".pdf" | "image/*,.pdf" | HTMLInputElement["accept"]',elements:[{name:"literal",value:'"image/*"'},{name:"literal",value:'".pdf"'},{name:"literal",value:'"image/*,.pdf"'},{name:'HTMLInputElement["accept"]',raw:'HTMLInputElement["accept"]'}]},description:`En string som begrenser hvilke filtyper som kan velges.

Flere filtyper kan defineres som en kommaseparert liste.

@see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept`},maxSizeBytes:{required:!1,tsType:{name:"number"},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:"@default true"},value:{required:!0,tsType:{name:"Array",elements:[{name:"FileInputFile"}],raw:"FileInputFile[]"},description:""},variant:{required:!1,tsType:{name:"union",raw:'"flexible" | "small"',elements:[{name:"literal",value:'"flexible"'},{name:"literal",value:'"small"'}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:`(
    e:
        | React.ChangeEvent<HTMLInputElement>
        | React.DragEvent<HTMLDivElement>,
    files: FileInputFile[],
) => void`,signature:{arguments:[{type:{name:"union",raw:`| React.ChangeEvent<HTMLInputElement>
| React.DragEvent<HTMLDivElement>`,elements:[{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"ReactDragEvent",raw:"React.DragEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]}]},name:"e"},{type:{name:"Array",elements:[{name:"FileInputFile"}],raw:"FileInputFile[]"},name:"files"}],return:{name:"void"}}},description:""}},composes:["Omit"]};const W={title:"Komponenter/FileInput",component:j,parameters:{layout:"centered"},tags:["autodocs"]},y={name:"FileInput",args:{variant:"flexible",value:[],onChange:console.info,legend:"Legg til fil"},render:a=>e.jsx(j,{...a})};var k,D,L;y.parameters={...y.parameters,docs:{...(k=y.parameters)==null?void 0:k.docs,source:{originalSource:`{
  name: "FileInput",
  args: {
    variant: "flexible",
    value: [],
    onChange: console.info,
    legend: "Legg til fil"
  },
  render: args => <FileInput {...args} />
}`,...(L=(D=y.parameters)==null?void 0:D.docs)==null?void 0:L.source}}};const K=["FileInputStory"];export{y as FileInputStory,K as __namedExportsOrder,W as default};
