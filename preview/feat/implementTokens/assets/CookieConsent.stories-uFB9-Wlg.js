import{r as l,R as n}from"./index-siqcju79.js";import{S as j,P as M}from"./Button-Bm5jRD6q.js";import{I as q}from"./index-BdKvcPYQ.js";import{M as x,a as S,b as R,c as _,d as D,f as I,g as P}from"./Modal-DkEi8KmZ.js";import{u as $}from"./useModal-PTsSX8Wr.js";import{C as A}from"./Checkbox-CwfoYjrc.js";import"./_commonjsHelpers-DaWZu8wl.js";import"./clsx-B-dksMZM.js";import"./usePreviousValue-f0kyfTHz.js";import"./Loader-Dq-CBRAZ.js";import"./useDelayedRender-CQprwS1c.js";import"./index-yL1brwCS.js";import"./IconButton-BsqD9nTf.js";import"./CloseIcon-bvBUMA_V.js";import"./Icon-mINJCSxV.js";import"./index-Chjiymov.js";import"./useId-CahK3IZ3.js";const F=e=>{if(typeof document>"u")return;const t=document.cookie.split(";").map(o=>o.trim().split("=")).find(o=>o[0]===e);if(t)return t},B=({adapter:e,name:t})=>{const o=F(t);if(o)return JSON.parse(o[1]);if(e)return e()},L=10368e3,W=({consent:e,maxAge:t=L,name:o,domain:a,path:r})=>{document.cookie=[`${o}=${JSON.stringify(e)}`,`max-age=${t}`,"SameSite=Lax",!!a&&`domain=${a}`,!!r&&`path=${r}`].filter(s=>s).join(";")},G=(e,t)=>{if(!t)return Object.values(e).some(r=>r);const o=new Map(Object.entries(t)),a=Object.entries(e);for(const[r,s]of a)if(s&&o.get(r)===null)return!0;return!1},b=e=>typeof e>"u"?null:e===!1||String(e).toLowerCase()==="false"?"denied":"accepted",w=(e,t)=>({functional:t.functional?b(e.functional):void 0,statistics:t.statistics?b(e.statistics):void 0,marketing:t.marketing?b(e.marketing):void 0}),H=({marketing:e,functional:t,statistics:o})=>({...e&&{marketing:e},...t&&{functional:t},...o&&{statistics:o}}),J="fremtind-cookie-consent",h=n.createContext(void 0),T=({children:e,cookieAdapter:t,marketing:o,functional:a,statistics:r,cookieName:s=J,cookieDomain:E,cookiePath:c})=>{const[m,k]=l.useState(()=>Date.now()),f=l.useMemo(()=>H({marketing:o,functional:a,statistics:r}),[o,a,r]),i=l.useMemo(()=>B({adapter:t,name:s})??{marketing:null,functional:null,statistics:null},[t,s,m]),[d,g]=l.useState(()=>G(f,i));return n.createElement(h.Provider,{value:{isOpen:d,setIsOpen:g,updateCurrentConsents:()=>k(Date.now()),requirement:f,currentConsent:i,cookieName:s,cookieDomain:E,cookiePath:c}},e)},K=()=>{const e=n.useContext(h);if(e===void 0)throw new Error("CookieConsent must be used within a CookieConsentProvider");return e},U=()=>{const e=l.useContext(h);if(e===void 0)throw new Error("useCookieConsent must be used within a CookieConsentProvider");const t=()=>{e.setIsOpen(!0)},o=e.currentConsent;return{openConsentModal:t,consents:o}};T.__docgenInfo={description:"",methods:[],displayName:"CookieConsentProvider",props:{children:{required:!0,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},cookieAdapter:{required:!1,tsType:{name:"signature",type:"function",raw:"() => Consent | undefined",signature:{arguments:[],return:{name:"union",raw:"Consent | undefined",elements:[{name:"signature",type:"object",raw:`{
    marketing?: ConsentState;
    functional?: ConsentState;
    statistics?: ConsentState;
}`,signature:{properties:[{key:"marketing",value:{name:"union",raw:'null | "denied" | "accepted"',elements:[{name:"null"},{name:"literal",value:'"denied"'},{name:"literal",value:'"accepted"'}],required:!1}},{key:"functional",value:{name:"union",raw:'null | "denied" | "accepted"',elements:[{name:"null"},{name:"literal",value:'"denied"'},{name:"literal",value:'"accepted"'}],required:!1}},{key:"statistics",value:{name:"union",raw:'null | "denied" | "accepted"',elements:[{name:"null"},{name:"literal",value:'"denied"'},{name:"literal",value:'"accepted"'}],required:!1}}]}},{name:"undefined"}]}}},description:""},cookieName:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"fremtind-cookie-consent"',computed:!1}},cookieDomain:{required:!1,tsType:{name:"string"},description:""},cookiePath:{required:!1,tsType:{name:"string"},description:""}}};const y=({defaultChecked:e,name:t,label:o,children:a})=>n.createElement(n.Fragment,null,n.createElement(A,{className:"jkl-cookie-consent-modal__checkbox",value:"true",name:t,defaultChecked:e},o),n.createElement("p",{className:"jkl-cookie-consent-modal__info-text"},a));y.__docgenInfo={description:"",methods:[],displayName:"RequirementCheckbox",props:{children:{required:!0,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},defaultChecked:{required:!0,tsType:{name:"boolean"},description:""},name:{required:!0,tsType:{name:"union",raw:'"functional" | "marketing" | "statistics"',elements:[{name:"literal",value:'"functional"'},{name:"literal",value:'"marketing"'},{name:"literal",value:'"statistics"'}]},description:""},label:{required:!0,tsType:{name:"string"},description:""}}};const V=({blocking:e,onAccept:t,...o})=>{const{currentConsent:a,cookieName:r,cookieDomain:s,cookiePath:E,requirement:c,isOpen:m,setIsOpen:k,updateCurrentConsents:f}=K(),[i,d]=$({id:`jkl-cookie-modal-${l.useId()}`,role:e?"alertdialog":"dialog",title:"Informasjonskapsler"});if(l.useEffect(()=>{m?i?.show():i?.hide()},[i,m]),l.useEffect(()=>{const u=()=>k(!1);return i?.on("hide",u),()=>{i?.off("hide",u)}},[i,k]),typeof document>"u")return null;if(typeof navigator<"u"&&!navigator.cookieEnabled)return t&&t({functional:"denied",marketing:"denied",statistics:"denied"}),null;const g=(u=w({functional:!0,statistics:!0,marketing:!0},c))=>{const p=Object.fromEntries(Object.entries(u).filter(([,O])=>typeof O<"u")),C={...a,...p};W({consent:C,name:r,domain:s,path:E}),f(),t?.(C),i?.hide()},N=u=>{u.preventDefault();const p=new FormData(u.currentTarget),C=w({functional:p.get("functional")==="true",statistics:p.get("statistics")==="true",marketing:p.get("marketing")==="true"},c);g(C)};return q.createPortal(n.createElement(x,{...d.container,...o,"data-cookie-consent-open":m},n.createElement(S,{...d.overlay}),n.createElement(R,{component:"form",...d.modal,onSubmit:N},n.createElement(_,null,n.createElement(D,{...d.title},"Velg informasjonskapsler")),n.createElement(I,null,n.createElement("p",null,"For at nettsidene skal fungere må vi bruke tekniske informasjonskaplser. Disse lagres derfor uten samtykke."),c.functional&&n.createElement(y,{name:"functional",label:"Tillat funksjonelle",defaultChecked:a.functional==="accepted",key:`functional-${a.functional}`},"Funksjonelle informasjonskapsler lagrer opplysninger om din bruk av nettsidene og hvilke innstillinger du har gjort, slik at du kan få funksjonalitet tilpasset deg."),c.statistics&&n.createElement(y,{name:"statistics",label:"Tillat statistikk",defaultChecked:a.statistics==="accepted",key:`statistics-${a.statistics}`},"Informasjonskapslene lagrer statistikk som hjelper oss med å forstå hvordan nettsidene blir brukt, slik at vi kan gjøre dem bedre og enklere å bruke."),c.marketing&&n.createElement(y,{name:"marketing",label:"Tillat personlig markedsføring",defaultChecked:a.marketing==="accepted",key:`marketing-${a.marketing}`},"Dette gjør at vi kan gi deg mer relevant og tilpasset markedsføring, også gjennom våre samarbeidspartnere, på for eksempel nettsider, annonser og i sosiale medier.")),n.createElement(P,null,n.createElement(j,{"data-testid":"jkl-cookie-consent-godta-alle",type:"button",onClick:()=>g()},"Godta alle"),n.createElement(j,{"data-testid":"jkl-cookie-consent-godta",type:"submit"},"Godta mine valg")))),document.body)},pe={title:"Komponenter/CookieConsent",component:T,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},X=({children:e})=>{const{openConsentModal:t}=U();return n.createElement("div",null,n.createElement(M,{onClick:()=>t()},"Åpne samtykker"),e)},v={args:{children:n.createElement(X,null,n.createElement(V,null)),cookieName:"demo-consent-cookie",functional:!0,statistics:!0,marketing:!0}};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  args: {
    children: <Wrapper>
                <CookieConsentComponent />
            </Wrapper>,
    cookieName: "demo-consent-cookie",
    functional: true,
    statistics: true,
    marketing: true
  }
}`,...v.parameters?.docs?.source}}};const ke=["CookieConsent"];export{v as CookieConsent,ke as __namedExportsOrder,pe as default};
