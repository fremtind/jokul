{"version":3,"file":"component---src-texts-blog-setup-google-maps-mdx-d423f9aba3fbb051a432.js","mappings":"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","sources":["webpack://@fremtind/portal/./src/texts/blog/setup-google-maps.mdx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/jokul/jokul/portal/src/components/Layout/DocPageLayout.tsx\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst Ingress = makeShortcode(\"Ingress\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <Ingress mdxType=\"Ingress\">\n    Let's create a comprehensive project and deliver all the secrets of Google Maps + TypeScript + React? This is the first blog of Google Maps tutorial series with a course video.\n    </Ingress>\n    <p>{`Coding with Google Maps is a fun, mysterious and challenging journey. If you do it with Typescript, both joy and pain get doubled.`}</p>\n    <p>{`When I was coding a Google Maps component for the first time, I was starving for a comprehensive tutorial on this topic.\nUnfortunately, the results were a bit disappointing, but like all developers I found a solution for each problem and the job was done.`}</p>\n    <p>{`On the other hand, a design system is not a single deliverable, but a collection of different services to create other applications.\nHowever, this definition should not limit us with reusable components only. Jøkul's blog posts are also a part of the design system's deliverables.\nOur team assessed the possibility of having a reusable Google Maps component among Jøkul's packages. After gaining enough experience and knowledge,\nwe decided not to take this path because Google Maps itself is a very large library and answering the demands of different parties did not seem feasible.\nAs a result of these, our team decided to support the users of Jøkul Design System with a comprehensive blog post series which will assist the consumers\nwith technical knowledge and best practices while developing their own Google Maps component.`}</p>\n    <p>{`So, while I was working on my map component, I discovered the answers to my questions via different websites. For example:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`How can I use TypeScript types from Google for my map project in React?`}</li>\n      <li parentName=\"ul\">{`How should I load my Google Maps API script into my homepage? What could be the best practice?`}</li>\n      <li parentName=\"ul\">{`Where should I use `}<inlineCode parentName=\"li\">{`useRef`}</inlineCode>{` to point out my Google Maps DOM element?`}</li>\n    </ul>\n    <p>{`Some of the answers that I found were outdated, some people were not quite sure of what they were advising, etc… You know the drill.`}</p>\n    <p>{`As a result, I created a sample project on GitHub and decided to sail for a new adventure as well. For the first time, I screencast while coding. The video is 55 minutes long and you can see the whole process.`}</p>\n    <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/fMsAPI7de0A\" title=\"YouTube video player\" frameBorder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen></iframe>\n    <h3>{`Setup and Installation`}</h3>\n    <p>{`To kick off the project, we need to create a react application with typescript flag. Use the sample command below to start with:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-npm\"\n      }}>{`npx create-react-app google-maps --template typescript\n`}</code></pre>\n    <p>{`After removing files like `}<inlineCode parentName=\"p\">{`logo.svg`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`App.test.tsx`}</inlineCode>{`, run the command below to install Google Maps TypeScript types. This will help you access types from the `}<inlineCode parentName=\"p\">{`google.maps`}</inlineCode>{` namespace such as `}<inlineCode parentName=\"p\">{`google.maps.Map`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`google.maps.LatLng`}</inlineCode>{`, and so on.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-npm\"\n      }}>{`npm install --save-dev @types/googlemaps\n`}</code></pre>\n    <p>{`Bonus Hint: By doing so, you will also obtain `}<inlineCode parentName=\"p\">{`google.maps.places.AutocompletePrediction`}</inlineCode>{` type which can be used to build an address dropdown component.`}</p>\n    <p>{`Now we are ready to give a shape to our React project. I set up the file and folder structure of my src folder as blueprinted below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-Folder\"\n      }}>{`├── App.css\n├── App.tsx\n├── Map\n   ├── Map.scss\n   ├── Map.tsx\n   └── index.ts\n├── index.css\n├── index.tsx\n├── react-app-env.d.ts\n└── utils\n   └── GoogleMapsUtils.ts\n`}</code></pre>\n    <h3>{`Loading the Google Maps library`}</h3>\n    <p>{`While developing a Google Maps component, we need to load the script tag which will download the API library for us. At the end, our web page should show something like this:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-html\"\n      }}>{`<script\nsrc=\"https://maps.googleapis.com/maps/api/js?key=<YOUR_API_KEY>&libraries=places&language=no&region=NO&v=quarterly\"\nasync defer>\n</script>\n`}</code></pre>\n    <p>{`Before loading this tag into our DOM structure, we cannot run Google Maps related code pieces. Therefore, we should create a utility function under `}<inlineCode parentName=\"p\">{`utils/GoogleMapsUtils.ts`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`export const loadMapApi = () => {\n    const mapsURL = \\`https://maps.googleapis.com/maps/api/js?key=\\${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}&libraries=geometry,places&language=no&region=NO&v=quarterly\\`;\n    const scripts = document.getElementsByTagName('script');\n    // Go through existing script tags, and return google maps api tag when found.\n    for (let i = 0; i < scripts.length; i++) {\n        if (scripts[i].src.indexOf(mapsURL) === 0) {\n            return scripts[i];\n        }\n    }\n\n    const googleMapScript = document.createElement('script');\n    googleMapScript.src = mapsURL;\n    googleMapScript.async = true;\n    googleMapScript.defer = true;\n    window.document.body.appendChild(googleMapScript);\n\n    return googleMapScript;\n};\n`}</code></pre>\n    <p>{`This function creates the aforementioned script tag and inserts it into the DOM if it is not found. `}<inlineCode parentName=\"p\">{`loadMapApi()`}</inlineCode>{` will be used by the page which uses our Map component. In my example, this page will be the homepage of the project (`}<inlineCode parentName=\"p\">{`App.tsx`}</inlineCode>{`).`}</p>\n    <h3>{`Making the app ready for maps`}</h3>\n    <p>{`In this application, we have two fundamental tasks for `}<inlineCode parentName=\"p\">{`App.tsx`}</inlineCode>{`. The first is to load the map utility, and the second is to render our Map component. To do the first, I created the React hook below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`const [scriptLoaded, setScriptLoaded] = useState(false);\n`}</code></pre>\n    <p>{`This hook makes sure that Google Maps script tag is loaded successfully into the page. When scriptLoaded hook is set true we render the Map component.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`useEffect(() => {\n    const googleMapScript = loadMapApi();\n    googleMapScript.addEventListener('load', function () {\n        setScriptLoaded(true);\n    });\n}, []);\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`return (\n    <div className=\"App\">\n        {scriptLoaded && (\n            <Map\n              mapType={google.maps.MapTypeId.ROADMAP}\n              mapTypeControl={true}\n            />\n        )}\n    </div>\n);\n`}</code></pre>\n    <h3>{`Time to render the map`}</h3>\n    <p>{`We finally reached to the heart of the application. `}<inlineCode parentName=\"p\">{`Map.tsx`}</inlineCode>{` is the component I mentioned earlier. Let’s create its interface (`}<inlineCode parentName=\"p\">{`IMap`}</inlineCode>{`) first.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`interface IMap {\n    mapType: google.maps.MapTypeId;\n    mapTypeControl?: boolean;\n}\n`}</code></pre>\n    <p>{`I wanted to receive two basic props. mapType can have ROADMAP, SATELLITE, TERRAIN or HYBRID values. These are specific map types defined by Google.`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"/assets/blog/google.maps.MapTypeId.ROADMAP.png\",\n        \"alt\": \"Roadmap Example\"\n      }}></img></p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"/assets/blog/google.maps.MapTypeId.SATELLITE.png\",\n        \"alt\": \"Satellite Example\"\n      }}></img></p>\n    <p>{`And we will use mapTypeControl prop to show/hide the control menu on the left-top corner of your map. We may extend the number of props to increase the usability of our map component, but I wanted to use only two props to illustrate my example.`}</p>\n    <p>I also use typescript’s custom type definition feature to increase the readability of my source code.</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`type GoogleLatLng = google.maps.LatLng;\ntype GoogleMap = google.maps.Map;\n`}</code></pre>\n    <p>{`Before I explain the `}<inlineCode parentName=\"p\">{`initMap`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`defaultMapStart`}</inlineCode>{`, and `}<inlineCode parentName=\"p\">{`startMap`}</inlineCode>{` functions, I would like to show you the render part of the Map component.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`const ref = useRef<HTMLDivElement>(null);\n\nreturn (\n    <div className=\"map-container\">\n        <div ref={ref} className=\"map-container__map\"></div>\n    </div>\n);\n`}</code></pre>\n    <p>{`The inner div element is the reference point for Google Maps. The API will load my map content into this div element and I use the outer div just for styling purposes. On the other hand, the same ref value is used by `}<inlineCode parentName=\"p\">{`initMap`}</inlineCode>{` function where the map is triggered.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`const initMap = (zoomLevel: number, address: GoogleLatLng): void => {\n    if (ref.current) {\n        setMap(\n            new google.maps.Map(ref.current, {\n                zoom: zoomLevel,\n                center: address,\n                mapTypeControl: mapTypeControl,\n                streetViewControl: false,\n                rotateControl: false,\n                scaleControl: true,\n                fullscreenControl: false,\n                panControl: false,\n                zoomControl: true,\n                gestureHandling: 'cooperative',\n                mapTypeId: mapType,\n                draggableCursor: 'pointer',\n            })\n        );\n    }\n};\n`}</code></pre>\n    <p>{`As you see above, before implementing the initMap function, I created a hook called `}<inlineCode parentName=\"p\">{`map`}</inlineCode>{`. This hook is used to keep the map object created by google.maps.Map(…) function. The same function takes our div element via ref.current as its first parameter and the second parameter is a json object which keeps the preferences of our map.`}</p>\n    <p><inlineCode parentName=\"p\">{`initMap`}</inlineCode>{` receives two inputs: `}<inlineCode parentName=\"p\">{`zoomLevel`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`address`}</inlineCode>{`. zoomLevel is straightforward to understand, but what address does will be more clear when we take a look at `}<inlineCode parentName=\"p\">{`defaultMapStart()`}</inlineCode>{` function.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`const defaultMapStart = (): void => {\n    const defaultAddress = new google.maps.LatLng(65.166013499, 13.3698147);\n    initMap(4, defaultAddress);\n};\n`}</code></pre>\n    <p>{`So, this function basically calls the `}<inlineCode parentName=\"p\">{`initMap`}</inlineCode>{`, but it also does some critical work as well. It decides where to focus and how much to focus when our map starts.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`const startMap = (): void => {\n    if (!map) {\n        defaultMapStart();\n    }\n};\nuseEffect(startMap, [map]);\n`}</code></pre>\n    <p>{`Finally, `}<inlineCode parentName=\"p\">{`startMap`}</inlineCode>{` function calls `}<inlineCode parentName=\"p\">{`defaultMapStart()`}</inlineCode>{` when the map hook is not null anymore. This check is necessary because of rendering delays and typescript will complain if you do not run this check.`}</p>\n    <h3>{`Conclusion`}</h3>\n    <p>{`This application may not seem so impressive in terms of functionality, but you see that we had to do a lot of things just to start our map. While shooting the video, I had a problem with the API key because I did not want to screencast it via my youtube video, but when I include it, the output is as shown below:`}</p>\n    <p><img parentName=\"p\" {...{\n        \"src\": \"/assets/blog/google.maps.MapTypeId.ROADMAP.png\",\n        \"alt\": \"Roadmap Example\"\n      }}></img></p>\n    <p>{`See you on the next tutorial/video where I will show how to add/remove markers on Google Maps. I hope you enjoyed this tutorial 🙂`}</p>\n    <br />\n    <p>{`(This article was previously published on `}<a parentName=\"p\" {...{\n        \"href\": \"https://storksnestblog.wordpress.com/2020/08/16/setting-up-google-maps-with-react-typescript/\"\n      }}>{`Stork's Nest`}</a>{`)`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","Ingress","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","width","height","src","title","frameBorder","allow","allowFullScreen","isMDXComponent"],"sourceRoot":""}