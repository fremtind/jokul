"use strict";(self.webpackChunk_fremtind_portal=self.webpackChunk_fremtind_portal||[]).push([[8168],{57676:function(e,n,r){r.r(n),r.d(n,{_frontmatter:function(){return m},default:function(){return k}});var t=r(30808),a=(r(27378),r(81368)),l=r(62803),i=["components"],m={},o={_frontmatter:m},d=l.Z;function k(e){var n=e.components,r=(0,t.Z)(e,i);return(0,a.mdx)(d,Object.assign({},o,r,{components:n,mdxType:"MDXLayout"}),(0,a.mdx)("h1",null,"Slik skriver du kode til Jøkul"),(0,a.mdx)("p",null,"Jøkul er et designsystem: Et bibliotek med komponenter. Det gir litt andre utfordringer enn når du driver med klientutvikling. Her får du en liten innføring i hvordan vi jobber med Jøkul. Jøkul blir brukt til å utvikle mange forskjellige løsninger, og må derfor dekke forskjellige behov og ønsker. Det er viktig at vi balanserer funksjonalitet, brukervennlighet, pakkestørrelse og kompleksitet i hver enkelt komponent."),(0,a.mdx)("h2",null,"Dette bruker vi"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},"Språk: ",(0,a.mdx)("a",{parentName:"li",href:"https://www.typescriptlang.org/docs/home.html"},"Typescript")),(0,a.mdx)("li",{parentName:"ul"},"JS-rammeverk: ",(0,a.mdx)("a",{parentName:"li",href:"https://reactjs.org/"},"React")),(0,a.mdx)("li",{parentName:"ul"},"Byggverktøy: ",(0,a.mdx)("a",{parentName:"li",href:"https://rollupjs.org/guide/en/"},"Rollup")," og ",(0,a.mdx)("a",{parentName:"li",href:"https://gulpjs.com/"},"Gulp")),(0,a.mdx)("li",{parentName:"ul"},"Test runner: ",(0,a.mdx)("a",{parentName:"li",href:"https://jestjs.io/"},"Jest")),(0,a.mdx)("li",{parentName:"ul"},"Testrammeverk: ",(0,a.mdx)("a",{parentName:"li",href:"https://testing-library.com/docs/react-testing-library/intro"},"React Testing Library")),(0,a.mdx)("li",{parentName:"ul"},"CSS-preprosessor: ",(0,a.mdx)("a",{parentName:"li",href:"https://sass-lang.com/"},"Sass")),(0,a.mdx)("li",{parentName:"ul"},"CSS-metodikk: ",(0,a.mdx)("a",{parentName:"li",href:"http://getbem.com"},"BEM"))),(0,a.mdx)("h2",null,"Dette må være installert på maskinen"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},"Node LTS. Bruk gjerne ",(0,a.mdx)("a",{parentName:"li",href:"https://github.com/nvm-sh/nvm"},"Node Version Manager")," om du kan, eller hent fra ",(0,a.mdx)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"Node"),"."),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("a",{parentName:"li",href:"https://classic.yarnpkg.com/lang/en/"},"Yarn Classic")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("a",{parentName:"li",href:"https://git-scm.com"},"Git")," 2.0.0 eller nyere")),(0,a.mdx)("h2",null,"Slik setter du opp utviklingsmiljøet på din egen maskin"),(0,a.mdx)("ol",null,(0,a.mdx)("li",{parentName:"ol"},"Klon eller fork ",(0,a.mdx)("a",{parentName:"li",href:"https://github.com/fremtind/jokul"},"Jøkul-biblioteket")," fra GitHub."),(0,a.mdx)("li",{parentName:"ol"},"Lag en ny branch og gi den et fornuftig navn etter hva du skal lage."),(0,a.mdx)("li",{parentName:"ol"},"Bygg prosjektet med kommandoen ",(0,a.mdx)("inlineCode",{parentName:"li"},"yarn boot"))),(0,a.mdx)("h2",null,"Slik har vi organisert pakkene"),(0,a.mdx)("p",null,"Alle komponentene er organisert under ",(0,a.mdx)("inlineCode",{parentName:"p"},"/packages"),". De som slutter på ",(0,a.mdx)("inlineCode",{parentName:"p"},"-react")," er React-pakker. De som ikke har en endelse, er stilpakker. Stilpakkene skal være generelle og du kan bruke dem uten noe JavaScript-rammeverk. Hver enkelt pakke inneholder et eksempel, som du kan kan starte med ",(0,a.mdx)("inlineCode",{parentName:"p"},"yarn dev")," fra hver enkelt pakke. Noen av stilpakkene mangler eksempler, fordi det kreves en del JavaScript for å få eksempelet til å kjøre. ",(0,a.mdx)("inlineCode",{parentName:"p"},"Select")," og ",(0,a.mdx)("inlineCode",{parentName:"p"},"Datepicker")," er eksempler på dette."),(0,a.mdx)("h2",null,"Slik håndterer vi brancher og versjoner"),(0,a.mdx)("p",null,"Vi organiserer koden i et monorepo og bruker ",(0,a.mdx)("a",{parentName:"p",href:"https://github.com/lerna/lerna"},"Lerna")," for å holde kontroll på de individuelle pakkene i repositoriet. Hver enkelt pakke følger ",(0,a.mdx)("a",{parentName:"p",href:"https://semver.org"},"semantisk versjonering"),". Nye versjoner og Changelog blir automatisk generert fra commit-loggen basert på ",(0,a.mdx)("a",{parentName:"p",href:"https://www.conventionalcommits.org/en/v1.0.0/"},"Conventional commits"),". Derfor er det satt regler for hvordan en commit skal se ut. Du kan bruke kommandoen ",(0,a.mdx)("inlineCode",{parentName:"p"},"yarn commit")," for å få hjelp med å lage en riktig formatert commitmelding."),(0,a.mdx)("p",null,"All utvikling skjer på brancher basert på hovedbranchen. Når du er klar lager du en ",(0,a.mdx)("a",{parentName:"p",href:"/komigang/pullrequests"},"pull request")," med mål om å gjøre en merge til hovedbranchen. Når endringen merges inn sørger Github Actions for å automatisk bygge og publisere nye versjoner av pakkene som er endret."),(0,a.mdx)("h2",null,"Slik lager du en ny pakke"),(0,a.mdx)("ol",null,(0,a.mdx)("li",{parentName:"ol"},"Gå til rot og kjør kommandoen ",(0,a.mdx)("inlineCode",{parentName:"li"},"lerna create <pakke-navn>"),"."),(0,a.mdx)("li",{parentName:"ol"},"Du får noen spørsmål om pakken. Fyll ut så godt du kan. Husk at navnet på pakken skal starte med ",(0,a.mdx)("inlineCode",{parentName:"li"},"@fremtind/jkl-"),"."),(0,a.mdx)("li",{parentName:"ol"},"Når pakken er opprettet, finner du en pakke av typen du skal lage (stil eller React). Kopier de script- og oppsettfilene du trenger, for eksempel ",(0,a.mdx)("inlineCode",{parentName:"li"},"tsconfig-for-declarations.json")," for React-pakker eller ",(0,a.mdx)("inlineCode",{parentName:"li"},"gulpfile.js")," for stilpakker.")),(0,a.mdx)("h2",null,"Slik lenker du pakker sammen"),(0,a.mdx)("p",null,"Hvis du vil legge til en pakke i en annen, kan du fra hvor som helst i prosjektet kjøre ",(0,a.mdx)("inlineCode",{parentName:"p"},"lerna add <pakke-som-skal-legges-til> --scope=<pakken-den-skal-inn-i>"),". For eksempel vil ",(0,a.mdx)("inlineCode",{parentName:"p"},"lerna add @fremtind/jkl-core scope=@fremtind/jkl-button")," legge til ",(0,a.mdx)("inlineCode",{parentName:"p"},"jkl-core")," som en avhengighet i ",(0,a.mdx)("inlineCode",{parentName:"p"},"jkl-button"),"-pakken. Når du legger til avhengigheter på denne måten, kan Lerna bruke den lokale versjonen av ",(0,a.mdx)("inlineCode",{parentName:"p"},"jkl-core")," i stedet for å laste ned fra NPM, slik at du kan utvikle raskere. Dette fungerer bare for andre pakker i Jøkul."),(0,a.mdx)("h2",null,"Slik legger du til en avhengighet"),(0,a.mdx)("p",null,"Det finnes avhengigheter på ulike nivåer i Jøkul. Globale avhengigheter, for eksempel de som trengs til å kjøre en byggejobb, ligger på rotnivå. Du kan legge til en ny pakke på rotnivå, med kommandoen ",(0,a.mdx)("inlineCode",{parentName:"p"},"yarn add pakke -W"),". For å legge til som en utviklingsavhengighet bruker du ",(0,a.mdx)("inlineCode",{parentName:"p"},"-DW"),"."),(0,a.mdx)("p",null,'Lokale avhengigheter, som trengs for at en pakke skal fungere i bruk, legger vi vanligvis på pakkenivå. Se "Slik lenker du pakker sammen". Bruk kommandoen ',(0,a.mdx)("inlineCode",{parentName:"p"},"yarn add")," for å legge til pakker som ikke er en del av Jøkul. Alternativt kan du bruke ",(0,a.mdx)("a",{parentName:"p",href:"https://github.com/lerna/lerna/tree/main/commands/add#readme"},(0,a.mdx)("inlineCode",{parentName:"a"},"lerna add")),". Før du gjør det, er det lurt å tenke på om de skal sendes med komponenten eller om brukeren av komponenten har ansvaret for å ha avhengigheten i sitt prosjekt. React bør for eksempel være en ",(0,a.mdx)("inlineCode",{parentName:"p"},"peerDependency"),", slik at brukeren ikke ender opp med flere utgaver av React i sin pakke."),(0,a.mdx)("h2",null,"Ende til ende tester"),(0,a.mdx)("p",null,"Hvis du lager en ny komponent, så kan du installere Cypress lokalt og utvikle ny integrasjons- og visuell regresjonstest av komponenten din."),(0,a.mdx)("p",null,"Hvis du gjør endring i en komponent som har visuell regresjonstest, sørg for at endringen din er ønsket og forventet på alle støttede plattformer. Så sletter du de eksisterende snapshotene av komponenten i prosjektet."),(0,a.mdx)("p",null,"Grunnen til at vi ikke vil ha lokale snapshots inn, er fordi vi ønsker at konteineren som kjører testene på vår CI server er fastiten. Den vil ikke rendere 100% likt som din maskin, så får å unngå konflikter lar vi CI serveren styre. Den vil commite inn de nye eller oppdaterte snapshotene hvis testene passerer."),(0,a.mdx)("h2",null,"Les mer"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},"Tester: ",(0,a.mdx)("a",{parentName:"li",href:"/komigang/tester"},"Kom i gang med tester")),(0,a.mdx)("li",{parentName:"ul"},"Pullrequests: ",(0,a.mdx)("a",{parentName:"li",href:"/komigang/pullrequests"},"Bidra til Jøkul på GitHub")),(0,a.mdx)("li",{parentName:"ul"},"Portalen: ",(0,a.mdx)("a",{parentName:"li",href:"/komigang/portalen"},"Dokumentasjon til portalen"))))}k.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-texts-getstarted-getting-started-dev-mdx-e2a25ad4e39f146996f9.js.map