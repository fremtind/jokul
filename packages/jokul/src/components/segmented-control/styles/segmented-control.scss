@charset "UTF-8";
@use "../../../core/jkl";
@use "../../../core/jkl/colors";

@include jkl.comfortable-density-variables {
  --jkl-segmented-controls-padding: #{jkl.$unit-10};
  --jkl-segmented-controls-margin: 1.5ch;

  @include jkl.declare-font-variables("jkl-segmented-control", "body");
}

@include jkl.compact-density-variables {
  --jkl-segmented-controls-padding: #{jkl.$unit-05};
  --jkl-segmented-controls-margin: 1ch;

  @include jkl.declare-font-variables("jkl-segmented-control", "small");
}

.jkl-segmented-control {
  @include jkl.use-font-variables("jkl-segmented-control");

  .jkl-segmented-control-legend {
    margin-block-end: 0.5lh;
  }

  .jkl-segmented-control-item {
    --jkl-segmented-control-border-width: 1px;
    --jkl-segmented-controls-border-radius: 1lh;

    position: relative;
    display: inline-flex;
    align-items: center;
    background-color: var(--jkl-color-background-interactive);
    padding-block: var(--jkl-segmented-controls-padding);
    padding-inline: 1ch 1.5ch;
    border: var(--jkl-segmented-control-border-width) solid var(--jkl-color-border-separator);
    border-radius: 0; // Gjør det enklere å behandle separering senere
    cursor: pointer;
    margin-inline-end: calc(var(--jkl-segmented-control-border-width) * -1);
    white-space: nowrap;

    @include jkl.motion("easeInBounceOut", "expressive", all);

    input {
      margin-inline-end: 5px;
      cursor: pointer;
    }

    &:hover {
      background-color: var(--jkl-color-background-interactive-hover);
      border-color: var(--jkl-color-border-separator-hover);
      z-index: 1;
    }

    &:has(input:checked) {
      background-color: var(--jkl-color-background-interactive-selected);
      border-color: var(--jkl-color-border-separator-strong);
      z-index: 1;
    }

    // Kontrollerer border og margin på separerte items + border-radius til neste sibling
    &[data-spacing="true"] {
      border-radius: var(--jkl-segmented-controls-border-radius);
      margin-inline-start: var(--jkl-segmented-controls-margin);

      &:first-of-type {
        margin-inline-start: 0;
      }

      + .jkl-segmented-control-item {
        border-end-start-radius: var(--jkl-segmented-controls-border-radius);
        border-start-start-radius: var(--jkl-segmented-controls-border-radius);

        margin-inline-start: var(--jkl-segmented-controls-margin);
      }
    }

    // Første element skal alltid ha border-radius på starten
    &:first-of-type {
      border-end-start-radius: var(--jkl-segmented-controls-border-radius);
      border-start-start-radius: var(--jkl-segmented-controls-border-radius);
    }

    // Siste element skal alltid ha border-radius på slutten
    &:last-of-type {
      border-end-end-radius: var(--jkl-segmented-controls-border-radius);
      border-start-end-radius: var(--jkl-segmented-controls-border-radius);
    }

    // Dersom nærmeste sibling er separert skal slutten ha border radius
    &:has(+ .jkl-segmented-control-item[data-spacing="true"]) {
      border-end-end-radius: var(--jkl-segmented-controls-border-radius);
      border-start-end-radius: var(--jkl-segmented-controls-border-radius);
    }
  }
}
