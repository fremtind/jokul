@charset "UTF-8";
@use "sass:color";
@use "sass:math";
@use "../../../core/jkl/index" as jkl;
@use "../../../core/jkl/colors";

@include jkl.compact-density-variables {
    --jkl-select-input-height: #{jkl.$unit-40};
    --jkl-select-button-padding: #{jkl.$unit-05} #{jkl.$unit-40} #{jkl.$unit-05}
    #{jkl.$unit-10};
    --jkl-select-arrow-right: #{jkl.$unit-05};
    --jkl-select-search-input-padding: #{jkl.$unit-05} #{jkl.$unit-10};
    --jkl-select-native-padding: #{jkl.$unit-05} #{jkl.$unit-30} #{jkl.$unit-05}
    #{jkl.$unit-05};
    --jkl-select-option-padding: #{jkl.$unit-05} #{jkl.$unit-10};

    @include jkl.declare-font-variables("jkl-select", "small");
}

@include jkl.comfortable-density-variables {
    --jkl-select-input-height: #{jkl.$unit-60};
    --jkl-select-button-padding: #{jkl.$unit-10} #{jkl.rem(36px)} #{jkl.$unit-10}
    #{jkl.$unit-15};
    --jkl-select-arrow-right: #{jkl.$unit-02};
    --jkl-select-search-input-padding: var(--jkl-select-button-padding);
    --jkl-select-native-padding: 0 #{jkl.$unit-50} 0 #{jkl.$unit-10};
    --jkl-select-option-padding: #{jkl.$unit-10} #{jkl.$unit-15};

    @include jkl.declare-font-variables("jkl-select", "body");

    @include jkl.small-device {
        --jkl-select-input-height: #{jkl.rem(44px)};
    }
}

.jkl-select--beta {
    --border-color: var(--jkl-color-border-input);
    --background-color: var(transparent);
    --color: var(--jkl-color-text-default);
    --box-shadow: 0 0 0 jkl.rem(1px) transparent;

    display: block;
    position: relative;

    @include jkl.reset-outline;

    & *:focus-visible {
        outline: none;
    }

    & .jkl-tooltip-question-button:focus {
        @include jkl.focus-outline($offset: 0);
    }

    &-wrapper {
        display: grid;
        grid-template-columns: 1fr auto;
        align-items: center;
    }

    & select,
    & .jkl-icon {
        grid-row: 1;
    }

    & select {
        // State variables
        background-color: var(--background-color);
        color: var(--color);
        border-color: var(--border-color);
        box-shadow: var(--box-shadow);

        // Mode variables
        padding: var(--jkl-select-button-padding);
        height: var(--jkl-select-input-height);

        grid-column: 1 / -1;
        appearance: none;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        cursor: pointer;
        border-radius: jkl.rem(3px);
        border: jkl.rem(1px) solid;
        text-align: left;
        width: 100%;
        transition-property: color, border-color, box-shadow;

        &:has(option:checked[value=""]) {
            --color: var(--jkl-color-text-subdued);
        }

        &:hover {
            --border-color: var(--jkl-color-border-input-focus);
            --box-shadow: 0 0 0 jkl.rem(1px) var(--jkl-color-border-input-focus);
        }

        &:invalid {
            --background-color: var(--jkl-color-background-alert-error);
            --color: var(--jkl-color-text-on-alert-subdued);
        }

        &:focus-visible {
            outline: none;
        }

        @include jkl.motion;
        @include jkl.use-font-variables("jkl-select");
        @include jkl.keyboard-navigation {
            &:focus-visible,
            &:has(:focus-visible) {
                @include jkl.focus-outline;
            }

            &:has(:focus-visible) {
                select {
                    @include jkl.focus-outline;
                }
            }
        }
    }

    & .jkl-icon {
        pointer-events: none;
        grid-column: 2;
        padding-inline-end: var(--jkl-select-arrow-right);
    }
}
