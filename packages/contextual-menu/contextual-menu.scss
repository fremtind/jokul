@use "~@fremtind/jkl-core/jkl";
@use "~@fremtind/jkl-core/jkl/colors";
@use "contextual-menu-item";
@use "contextual-menu-item-expandable";
@use "contextual-menu-icon-initiator";

@include jkl.light-mode-variables {
    --jkl-contextual-menu--border-color: #{jkl.$color-skifer};
    --jkl-contextual-menu-bg-color: #{jkl.$color-hvit};
    --jkl-contextual-menu-item-hover-background-color: #{jkl.$color-sand};
}

@include jkl.dark-mode-variables {
    --jkl-contextual-menu--border-color: #{jkl.$color-hvit};
    --jkl-contextual-menu-bg-color: #{jkl.$color-svart};
    --jkl-contextual-menu-item-hover-background-color: #{jkl.$color-skifer};
    --jkl-contextual-menu-item-border: 2px solid #{jkl.$color-snohvit};
}

@include jkl.comfortable-density-variables {
    --jkl-contextual-menu-item-font-size: jkl.$typography-font-size-3;
    --jkl-contextual-menu-item-height: jkl.rem(48px);

    @include jkl.small-device {
        --jkl-contextual-menu-item-font-size: jkl.$typography-font-size-1;
        --jkl-contextual-menu-item-height: jkl.rem(32px);
    }
}

@include jkl.compact-density-variables {
    --jkl-contextual-menu-item-font-size: jkl.$typography-font-size-1;
    --jkl-contextual-menu-item-height: jkl.rem(32px);
}

.jkl-contextual-menu {
    width: fit-content;
    margin: 0;

    &__initiator {
        user-select: none;

        &:focus,
        &:hover {
            cursor: pointer;
        }
    }

    &__menu {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        flex-wrap: nowrap;
        background-color: var(--jkl-contextual-menu-bg-color);
        padding-top: jkl.rem(8px);
        padding-bottom: jkl.rem(8px);
        box-shadow: 0 jkl.rem(4px) jkl.rem(20px) rgb(49 48 48 / 20%);
        border-radius: jkl.rem(2px);
        border: var(--jkl-contextual-menu-item-border);
        min-width: jkl.rem(300px);
        height: fit-content;
        z-index: 1;

        &[data-placement^="bottom-start"] .jkl-contextual-menu__menu {
            right: 0;
            bottom: 0;
        }

        &[data-placement^="bottom-end"] .jkl-contextual-menu__menu {
            left: 0;
            bottom: 0;
        }

        &[data-placement^="right-end"] .jkl-contextual-menu__menu {
            right: 0;
        }

        &[data-placement^="right-start"] .jkl-contextual-menu__menu {
            right: 0;
            top: 0;
        }
    }

    &__menu-item {
        display: flex;
        align-items: center;
        flex-wrap: nowrap;
        height: var(--jkl-contextual-menu-item-height);
        padding: jkl.rem(8px) jkl.rem(8px) jkl.rem(8px) jkl.rem(12px);
        min-width: jkl.rem(300px);
        box-sizing: border-box;
        user-select: none;
        font-size: var(--jkl-contextual-menu-item-font-size);

        &:hover:not(:disabled) {
            background-color: var(--jkl-contextual-menu-item-hover-background-color);
            cursor: pointer;
        }
    }

    &__menu-item span {
        width: jkl.rem(280px);
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    &__option {
        &:hover {
            cursor: pointer;
        }
    }
}
