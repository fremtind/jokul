@use "sass:color";
@use "~@fremtind/jkl-core/jkl";

$_slider-offset: 3px;
$_slider-width: 170px;
$_slider-pill-offset--left: calc(#{$_slider-offset} + 1px);
$_slider-pill-offset--right: calc(calc(#{$_slider-width} / 2) - #{$_slider-offset});
$_slider-rounded: jkl.rem(100px);
$_slider-focus-ring-width: jkl.rem(2px);

@include jkl.light-mode-variables {
    --jkl-slider-bg: #{jkl.$color-varde};
    --jkl-slider-pill: #{jkl.$color-snohvit};
    --jkl-slider-pill-text: #{jkl.$color-granitt};
    --jkl-slider-pill-text--active: #{jkl.$color-granitt};
    --jkl-slider-focus-color: #{jkl.$color-svart};
    --jkl-slider-hover-color: #{jkl.$color-stein};
}

@include jkl.dark-mode-variables {
    --jkl-slider-bg: #{jkl.$color-fjellgra};
    --jkl-slider-pill: #{jkl.$color-granitt};
    --jkl-slider-pill-text: #{jkl.$color-snohvit};
    --jkl-slider-pill-text--active: #{jkl.$color-snohvit};
    --jkl-slider-focus-color: #{jkl.$color-svaberg};
    --jkl-slider-hover-color: #{jkl.$color-svaberg};
}

.jkl-toggle-slider__wrapper {
    display: flex;
    align-items: center;
    width: 100%;

    .jkl-toggle-slider {
        @include jkl.reset-outline;

        html:not([data-mousenavigation]):not([data-touchnavigation]) &:focus-within {
            box-shadow: 0 0 0 $_slider-focus-ring-width var(--jkl-slider-focus-color);

            .jkl-toggle-slider__pill {
                box-shadow: 0 0 0 $_slider-focus-ring-width var(--jkl-slider-focus-color);
            }
        }

        cursor: pointer;
        background-color: var(--jkl-slider-bg);
        padding: jkl.$spacing-xs 0;
        position: relative;
        border-radius: $_slider-rounded;
        overflow: hidden;
        display: flex;
        justify-content: space-between;
        max-width: $_slider-width;
        width: 100%;
        user-select: none;

        &__pill {
            width: 50%;
            height: calc(100% - #{$_slider-offset} - #{$_slider-offset});
            background-color: var(--jkl-slider-pill);
            display: block;
            position: absolute;
            top: $_slider-offset;
            transform: translateX($_slider-pill-offset--right);
            transition-property: transform;
            @include jkl.motion(standard, expressive);
            border-radius: $_slider-rounded;
            box-shadow: 0 0 jkl.rem(4px) color.scale(jkl.$color-svart, $alpha: -15%);
        }

        &--left,
        &--right {
            z-index: 1;
            display: block;
            width: 50%;
            text-align: center;
            color: var(--jkl-slider-pill-text);
            transition-property: color;
            @include jkl.motion(standard, expressive);
        }

        &--left {
            margin-left: calc(#{$_slider-offset} * 2);
        }

        &--right {
            margin-right: calc(#{$_slider-offset} * 2);
        }

        &--left,
        &--right,
        &__label {
            @include jkl.text-style("small") {
                font-weight: jkl.$typography-weight-bold;
            }
        }

        &--checked {
            & > .jkl-toggle-slider--right {
                color: var(--jkl-slider-pill-text--active);
            }

            @media (hover: hover) {
                &:hover {
                    & > .jkl-toggle-slider--left {
                        color: var(--jkl-slider-hover-color);
                    }
                }
            }
        }

        &--not-checked {
            & > .jkl-toggle-slider__pill {
                transform: translateX($_slider-pill-offset--left);
            }

            & > .jkl-toggle-slider--left {
                color: var(--jkl-slider-pill-text--active);
            }

            @media (hover: hover) {
                &:hover {
                    & > .jkl-toggle-slider--right {
                        color: var(--jkl-slider-hover-color);
                    }
                }
            }
        }

        @include jkl.forced-colors-mode {
            background-color: Canvas;

            & .jkl-toggle-slider__pill {
                background-color: ButtonFace;
            }
        }
    }
}
