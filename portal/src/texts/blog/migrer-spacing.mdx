---
title: Smarte tips til refaktorering av spacing
author: Pio Rasch-Halvorsen
description: Gj칮r oppgraderingen til J칮kul 8.0 litt enklere!
publishDate: "2021.10.26"
---

<Ingress>
    Etter at vi har gjort om spacing-skalaen i J칮kul er det kanskje mange som har en stor refaktoreringsjobb foran seg.
    Her er noen tips som kan gj칮re den litt lettere!
</Ingress>

Det er et par ting som b칮r gj칮res n친r du tar i bruk den nye spacing-skalaen. For det f칮rste m친 du bytte om til de nye navnene b친de der du har brukt hjelpeklasser og der du har brukt variablene i Sass. I tillegg b칮r du s칮rge for 친 importere Sass-variablene fra `@forbrukerradet/jkl-core/jkl`. Med litt smart bruk av regex og s칮k-og-erstatt kan vi f친 til dette litt enklere enn man skulle tro.

Siden vi har endret navngivingen i skalaen kan man ikke bruke _ett_ magisk regex-uttrykk for 친 refaktorere til de nye verdiene, men ved 친 ta et par sm친 mellomsteg kan vi i hvert fall redusere det manuelle arbeidet ganske mye.

## 1. Hjelpeklassene

De gamle hjelpelklassene var p친 formen `jkl-<type>-spacing--<steg>-<posisjon>`, der **type** er `layout` eller `component`, **steg** er steget i den gamle skalaen (f.eks. `large`), og **posisjon** er `top`, `right`, `bottom`, `left` eller `all`.

De nye klassene er p친 formen `jkl-spacing-<steg>--<posisjon>`, der **steg** er et steg i den nye skalaen **posisjon** er det samme som i de gamle klassene. Med en regex s칮k-og-erstatt kan vi gj칮re om fra det gamle til det nye formatet, men med steg og type fra den gamle skalaen. Da er vi klare for senere 친 oversette verdiene fra gammel til ny skala.

-   Vi s칮ker etter `jkl-(component|layout)-spacing--(\w+)-(\w+)`, og f친r da ut grupper for type, steg og posisjon. Disse kan vi sette inn i det nye formatet, f.eks. slik: `jkl-spacing-<$1-$2>--$3`.

-   Det finnes ogs친 en enda eldre skala med tall, som kun omfatter layout-spacing. Vi gj칮r om den p친 tilsvarende m친te med s칮k `jkl-spacing--(\w+)-(\d)` og erstatt `jkl-spacing-<tall-layout-$2>--$1`.

## 2. Variablene

Variablene har ingen varianter for posisjon, s친 her blir regexen hakket enklere! Vi gj칮r om b친de den gamle og den eldgamle skalaen her ogs친, til det samme formatet som vi brukte for hjelpeklassene.

-   For den gamle skalaen bruker du s칮k `\$(component|layout)-spacing--(\w+)` og erstatt `$spacing-<$1-$2>`
-   For den enda eldre skalaen med tall (som her omfatter "hele" skalaen) bruker du s칮k `$spacing-(\d)` og erstatt `$spacing-<tall-komplett-$1>`

## 3. Oversettingen

N친 har du f친tt b친de hjelpeklasser og variabler over i samme format, s친 det er p친 tide 친 faktisk oversette verdiene. Du m친 fortsatt g친 gjennom verdiene en og en, men siden vi har fikset formatet holder det med _erstatt alle_ 칠n gang per skala og verdi!

Ta utgangspunkt i [tabellene i migrasjonsguiden](https://github.com/fremtind/jokul/blob/main/packages/core/MIGRATION.md#variabler-i-spacingskalaen), og erstatt verdiene p친 f칮lgende m친te (ingen regex n칮dvendig!):

-   For komponent-/og layoutskala s칮k `<component-xxs>` og erstatt `3xs`. Gj칮r tilsvarende med alle steg i tabellene for b친de layout- og komponentskalaene.
-   For den komplette tallskalaen s칮k `<tall-komplett-1>` og erstatt `3xs`. Gj칮r tilsvarende for alle tallene i skalaen.
-   For tall-layoutskalaen s칮k `<tall-layout-1>` og erstatt `l`. Gj칮r tilsvarende for resten av tallene i skalaen.

Gratulerer! Du har n친 oversatt alle gamle varianter av spacing med de nyeste! 游꿀

## 4. Importene

Dette steget er forel칮pig strengt tatt valgfritt, men vi anbefaler alle 친 g친 over til den nye importen av J칮kul-variablene i Sass ved hjelp av `@use`. NB! Dette krever at man bruker nyeste versjon av Sass i prosjektet sitt, noe vi ogs친 anbefaler at man gj칮r.

Her har vi dessverre ingen magisk regex, siden det vil kunne variere fra prosjekt til prosjekt, men man 칮nsker 친 endre importen til `@use '~@forbrukerradet/jkl-core/jkl';` og prefikse alle variablene med `jkl`. Dette lar seg ogs친 i stor grad l칮se med s칮k-og-erstatt, du vet best hva du m친 lete etter i ditt prosjekt!
